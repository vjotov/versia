<html><head>
   
      <meta http-equiv="Content-Type" content="text/html; charset=ISO-8859-1">
   
      <meta http-equiv="Content-Type" content="text/html; charset=ISO-8859-1">
      <meta http-equiv="Expires" content="0">
      <meta name="TRELLIX_BUILDER_VER" content="1.0"><meta name="TRELLIX_OPEN_SITE_COMMAND" content="http://trellix.business.earthlink.net:80/servlet/SiteBuilderServlet?fUrl=/trellix/sitebuilder/f_error.html&amp;sUrl=/trellix/sitebuilder/f_edit_page.html&amp;Command=OpenSite&amp;FileName=3678436211533998660/site.xml">
      <!--base href="http://www.kamfonas.com//"-->
      <!--/base--><script language="Javascript"><!--
		document.isTrellix = 1;
//						--></script><title>Recursive Hierarchies</title>
      <meta name="description" content="This is a republication of an article published in the 1992 October/November issue of the Codd and Date Relational Journal. Joe Celko includes a similar methon in his SQL for Smarties">
      <meta name="keywords" content="DB2, Relational Database, Hierarchy, Dimension, ROLAP, Oracle, Sybase, Recursive Hierarchy, Normalized Hierarchy, Recursive Union">
   </head><body leftmargin="0" topmargin="0" rightmargin="4" style="background-image: url(/imagelib/sitebuilder/layout/mkg_grid_1.jpg); background-repeat: no-repeat;" alink="#990099" bgcolor="#ffffff" vlink="#0066cc" link="#0066cc" marginheight="0" marginwidth="0">
      <table border="0" cellpadding="0" cellspacing="0">
         <tbody><tr valign="top">
            <td width="149"><img src="0316%20Recursive%20Hierarchies-%20The%20Relational%20Taboo_files/spacer.gif" alt="" width="149" height="2"></td>
            <td colspan="4" width="610"><img src="0316%20Recursive%20Hierarchies-%20The%20Relational%20Taboo_files/spacer.gif" alt="" width="1" height="2"></td>
         </tr>
         <tr>
            <td align="center" background="0316%20Recursive%20Hierarchies-%20The%20Relational%20Taboo_files/mkg_grid_2.gif" valign="middle" width="149" height="80"><img src="0316%20Recursive%20Hierarchies-%20The%20Relational%20Taboo_files/spacer.gif" alt=""></td>
            <td width="2"><img src="0316%20Recursive%20Hierarchies-%20The%20Relational%20Taboo_files/spacer.gif" alt="" width="2" height="2"></td>
            <td width="6"><img src="0316%20Recursive%20Hierarchies-%20The%20Relational%20Taboo_files/spacer.gif" alt="" width="6" height="2"></td>
            <td align="center" background="0316%20Recursive%20Hierarchies-%20The%20Relational%20Taboo_files/spacer.gif" valign="top" height="80">
               <table background="0316%20Recursive%20Hierarchies-%20The%20Relational%20Taboo_files/spacer.gif" border="0" cellpadding="2" cellspacing="0">
                  <tbody><tr>
                     <td width="595">
                        <div align="left"><font color="#ffffff" size="2" face="Arial,Helvetica,sans-serif"><b>InfoKarta Inc.</b></font></div>
                     </td>
                  </tr>
                  <tr>
                     <td width="595">
                        <div><font color="black" size="5" face="Arial,Helvetica,sans-serif"><b>Recursive Hierarchies</b></font></div>
                     </td>
                  </tr>
               </tbody></table>
            </td>
            <td width="2"><img src="0316%20Recursive%20Hierarchies-%20The%20Relational%20Taboo_files/spacer.gif" alt="" width="2" height="2"></td>
         </tr>
      </tbody></table>
      <table border="0" cellpadding="0" cellspacing="0">
         <tbody><tr>
            <td width="149"><img src="0316%20Recursive%20Hierarchies-%20The%20Relational%20Taboo_files/spacer.gif" alt="" width="149" height="2"></td>
            <td colspan="3" width="610"><img src="0316%20Recursive%20Hierarchies-%20The%20Relational%20Taboo_files/spacer.gif" alt="" width="1" height="2"></td>
         </tr>
         <tr>
            <td align="center" background="0316%20Recursive%20Hierarchies-%20The%20Relational%20Taboo_files/spacer.gif" valign="top" height="80">
               <table border="0" cellpadding="0" cellspacing="0">
                  <tbody><tr>
                     <td width="149"><img src="0316%20Recursive%20Hierarchies-%20The%20Relational%20Taboo_files/spacer.gif" alt="" width="149" height="20"></td>
                  </tr>
                  <tr>
                     <td align="center" width="149"></td>
                  </tr>
                  <tr>
                     <td width="149"><img src="0316%20Recursive%20Hierarchies-%20The%20Relational%20Taboo_files/spacer.gif" alt="" width="149" height="8"></td>
                  </tr>
                  <tr>
                     <td align="center" valign="top" width="149">
                        <!--navbar Type="vert" uses-text="Y" face="Arial,Helvetica,sans-serif" size="1" color="000000" style="0"--><script language="javascript" type="text/javascript">
        function doRollover(elem, rollover_color, text_color){
            // set background color of TD
            if (elem.parentNode){ // IE5, IE6 and Netscape 6
                if (rollover_color == 'transparent'){   // Netscape does not like the word "transparent".
                    elem.parentNode.bgColor = '';    
                }
                else{
                    elem.parentNode.bgColor=rollover_color;
                }
            }
            else if (elem.parentElement && elem.parentElement.setAttribute){ // IE4.
                elem.parentElement.setAttribute("bgColor", rollover_color);
            }
            else{  // Netscape 4.6x or 4.7x
                //alert("Must be Netscape! do nothing");
            }
            // set color of the link text
            if (elem.children){  // IE4, IE5, IE6 and Netscape 6
                elem.children(0).style.color=text_color;
            }
        }                              
        </script><table background="0316%20Recursive%20Hierarchies-%20The%20Relational%20Taboo_files/spacer.gif" border="0" cellpadding="5" cellspacing="2" width="100%"><style>
        <!--
        A.NavBar:link    {color: 000000 ; text-decoration: none}
        A.NavBar:visited {color: 000000 ; text-decoration: none}
        A.NavBar:active  {color: 000000 ; text-decoration: underline}
        A.NavBar:hover   {color: #000000 ; text-decoration: underline}
        -->
        </style><tbody><tr>
                              <td align="center"><a class="NavBar" onmouseover="doRollover(this, 'transparent', '#000000')" onmouseout="doRollover(this, 'transparent', '000000')" href="http://www.kamfonas.com/index.html"><font style="color: rgb(0, 0, 0);" size="1" face="Arial,Helvetica,sans-serif"><b>Home</b></font></a></td>
                           </tr>
                           <tr>
                              <td align="center"><a class="NavBar" onmouseover="doRollover(this, 'transparent', '#000000')" onmouseout="doRollover(this, 'transparent', '000000')" href="http://www.kamfonas.com/id5.html"><font style="color: rgb(0, 0, 0);" size="1" face="Arial,Helvetica,sans-serif"><b>About us</b></font></a></td>
                           </tr>
                           <tr>
                              <td align="center"><a class="NavBar" onmouseover="doRollover(this, 'transparent', '#000000')" onmouseout="doRollover(this, 'transparent', '000000')" href="http://www.kamfonas.com/id6.html"><font style="color: rgb(0, 0, 0);" size="1" face="Arial,Helvetica,sans-serif"><b>Content</b></font></a></td>
                           </tr>
                        </tbody></table>
                        <!--/navbar-->
                     </td>
                  </tr>
               </tbody></table>
            </td>
            <td width="2"><img src="0316%20Recursive%20Hierarchies-%20The%20Relational%20Taboo_files/spacer.gif" alt="" width="2" height="2"></td>
            <td>
               <table border="0" cellpadding="4" cellspacing="0">
                  <tbody><tr>
                     <td valign="top" width="596">
                        <!--area Type="subhead" face="Arial,Helvetica,sans-serif" size="3" color="black" style="3"-->
                        
                        <p><font color="black" size="3" face="Arial,Helvetica,sans-serif"><b><i></i></b></font></p><div>
<font color="black" size="3" face="Arial,Helvetica,sans-serif"><b><i>                           </i></b></font><p class="MsoTitle" style="margin: 12pt 0pt 0pt;"><span style="font-family: 'Times New Roman';"><font color="black" size="3" face="Arial,Helvetica,sans-serif"><b><i><font size="5">Recursive Hierarchies:
                           The Relational Taboo!</font></i></b></font></span></p><span style="font-family: 'Times New Roman';"><font color="black" size="3" face="Arial,Helvetica,sans-serif"><b><i><font size="5">
                           </font></i></b></font><p class="MsoSubtitle" style="margin: 12pt 0pt 0pt;"><span style="font-family: 'Times New Roman';"><font color="black" size="3" face="Arial,Helvetica,sans-serif"><b><i><font size="5"><font size="3">By Michael J.
                           Kamfonas<br></font></font></i></b></font></span><span style="font-size: 8pt; font-family: 'Times New Roman';"><font color="black" size="3" face="Arial,Helvetica,sans-serif"><b><i><font size="5">Copyright
                           © All Rights Reserved</font></i></b></font></span></p>
<font color="black" size="3" face="Arial,Helvetica,sans-serif"><b><i><font size="5">                           </font></i></b></font><p class="MsoSubtitle" style="margin: 12pt 0pt 0pt;"><span style="font-size: 8pt; font-family: 'Times New Roman';"><font color="black" size="3" face="Arial,Helvetica,sans-serif"><b><i><font size="5">Originally published at The Relational Journal - October/November 1992</font></i></b></font></span></p>
<font color="black" size="3" face="Arial,Helvetica,sans-serif"><b><i><font size="5">                           </font></i></b></font><div style="border-style: none none solid; border-color: -moz-use-text-color -moz-use-text-color windowtext; border-width: medium medium 0.75pt; padding: 0pt 0pt 1pt;">
<font color="black" size="3" face="Arial,Helvetica,sans-serif"><b><i><font size="5">                           </font></i></b></font><p class="Byline" style="margin: 12pt 0pt; text-align: left;" align="left"><font color="black" size="3" face="Arial,Helvetica,sans-serif"><b><i><font size="5"><sup><span style="font-family: 'Times New Roman';"><font size="3"><o:p></o:p></font></span></sup></font></i></b></font></p></div>
<font color="black" size="3" face="Arial,Helvetica,sans-serif"><b><i><font size="5">                           </font></i></b></font><p class="Abstract" style="margin: 0pt; text-indent: 144pt;"><span style="font-family: 'Times New Roman';"><font color="black" size="3" face="Arial,Helvetica,sans-serif"><b><i><font size="5"><font size="2"><em>As
                           I was going to St. Ives<o:p></o:p></em></font></font></i></b></font></span></p>
<font color="black" size="3" face="Arial,Helvetica,sans-serif"><b><i><font size="5">                           </font></i></b></font><p class="Abstract" style="margin: 0pt; text-indent: 144pt;"><span style="font-family: 'Times New Roman';"><font color="black" size="3" face="Arial,Helvetica,sans-serif"><b><i><font size="5"><font size="2"><em>I
                           met a man with seven wives.<o:p></o:p></em></font></font></i></b></font></span></p>
<font color="black" size="3" face="Arial,Helvetica,sans-serif"><b><i><font size="5">                           </font></i></b></font><p class="Abstract" style="margin: 0pt; text-indent: 144pt;"><span style="font-family: 'Times New Roman';"><font color="black" size="3" face="Arial,Helvetica,sans-serif"><b><i><font size="5"><font size="2"><em>Every
                           wife had seven sacks<o:p></o:p></em></font></font></i></b></font></span></p>
<font color="black" size="3" face="Arial,Helvetica,sans-serif"><b><i><font size="5">                           </font></i></b></font><p class="Abstract" style="margin: 0pt; text-indent: 144pt;"><span style="font-family: 'Times New Roman';"><font color="black" size="3" face="Arial,Helvetica,sans-serif"><b><i><font size="5"><font size="2"><em>Every
                           sack had seven cats<o:p></o:p></em></font></font></i></b></font></span></p>
<font color="black" size="3" face="Arial,Helvetica,sans-serif"><b><i><font size="5">                           </font></i></b></font><p class="Abstract" style="margin: 0pt; text-indent: 144pt;"><span style="font-family: 'Times New Roman';"><font color="black" size="3" face="Arial,Helvetica,sans-serif"><b><i><font size="5"><font size="2"><em>Every
                           cat had seven kits<o:p></o:p></em></font></font></i></b></font></span></p>
<font color="black" size="3" face="Arial,Helvetica,sans-serif"><b><i><font size="5">                           </font></i></b></font><p class="Abstract" style="margin: 0pt; text-indent: 144pt;"><span style="font-family: 'Times New Roman';"><font color="black" size="3" face="Arial,Helvetica,sans-serif"><b><i><font size="5"><font size="2"><em>Kits,
                           cats, sacks and wives,<o:p></o:p></em></font></font></i></b></font></span></p>
<font color="black" size="3" face="Arial,Helvetica,sans-serif"><b><i><font size="5">                           </font></i></b></font><p class="Abstract" style="margin: 0pt; text-indent: 144pt;"><span style="font-family: 'Times New Roman';"><font color="black" size="3" face="Arial,Helvetica,sans-serif"><b><i><font size="5"><em><font size="2">How
                           many were going to St. Ives? <o:p></o:p></font></em></font></i></b></font></span></p>
<font color="black" size="3" face="Arial,Helvetica,sans-serif"><b><i><font size="5">                           </font></i></b></font><p class="Body" style="margin: 12pt 0pt 0pt; text-indent: 216pt;"><font color="black" size="3" face="Arial,Helvetica,sans-serif"><b><i><font size="5"><font size="2">Mother Goose</font></font></i></b></font></p>
<font color="black" size="3" face="Arial,Helvetica,sans-serif"><b><i><font size="5">                           </font></i></b></font><p class="MsoTitle" style="margin: 12pt 0pt 0pt;"><o:p></o:p><font color="black" size="3" face="Arial,Helvetica,sans-serif"><b><i><font size="5"></font></i></b></font></p></span><font color="black" size="3" face="Arial,Helvetica,sans-serif"><b><i>&nbsp;
                           <!--"''"--></i></b></font><p></p></div><font color="black" size="3" face="Arial,Helvetica,sans-serif"><b><i></i></b></font>
                        <p></p>
                        
                        <!--/area Type="subhead"-->
                     </td>
                  </tr>
                  <tr>
                     <td width="592" height="20"><img src="0316%20Recursive%20Hierarchies-%20The%20Relational%20Taboo_files/spacer.gif" alt="" height="20"></td>
                  </tr>
                  <tr>
                     <td valign="top">
                        <table border="0" cellpadding="2" cellspacing="0">
                           <tbody><tr>
                              <td valign="top" width="592">
                                 <!--area Type="main" face="Arial,Helvetica,sans-serif" size="2" color="black" style="0"-->
                                 
                                 <p><font color="black" size="2" face="Arial,Helvetica,sans-serif"></font></p><div>
<font color="black" size="2" face="Arial,Helvetica,sans-serif">                                    </font><div class="Section1">
<font color="black" size="2" face="Arial,Helvetica,sans-serif">                                    </font><p class="Abstract" style="margin: 12pt 0pt 0pt 18pt; text-indent: 0pt;"><span style="font-family: 'Times New Roman';"><font color="black" size="2" face="Arial,Helvetica,sans-serif"><font size="2"><em>All

data warehouse and data mart designers eventually come across the
dimension they wish they could represent as a recursive hierarchy. It
may be that it has too many levels or uneven branches, or it may be
dynamic with complex segmentation rules not known at design time.<span style="">&nbsp; </span>The
dilemma the designer faces is to force-fit the dimension into some
fixed depth hierarchy, or to live with the performance implications of
recursive SQL, such as the recursive union of DB2/UDB or Oracle&#8217;s
&#8220;CONNECT BY&#8221;. Fortunately, there is another alternative. It exploits
the concept of topological ordering and shifts most of the costly work
to be done once in a preparatory step very similar to indexing. It is
based on node enumeration applied at the time of data maintenance that
enables transitive closure to be evaluated in a single SQL query. This
technique particularly favors dimensions that are hierarchical,
relatively stable in time, and are periodically maintained. <o:p></o:p></em></font></font></span></p>
<font color="black" size="2" face="Arial,Helvetica,sans-serif">                                    </font><p class="Abstract" style="margin: 12pt 0pt 0pt 18pt; text-indent: 0pt;"><span style="font-family: 'Times New Roman';"><font color="black" size="2" face="Arial,Helvetica,sans-serif"><font size="2"><em>A

lot of interest has been expressed recently for solutions to the
recursive hierarchy problem. This technique has been successfully used
since the early 90s, often combined with versioning to represent slowly
changing recursive hierarchies. This article focuses on the basic
technique, and it is part of the Versioned Dimensional Model, a
collection of techniques for dimensional store design.<o:p></o:p></em></font></font></span></p>
<font color="black" size="2" face="Arial,Helvetica,sans-serif">                                    </font><p class="Abstract" style="margin: 12pt 0pt 0pt 18pt; text-indent: 0pt;"><span style="font-family: 'Times New Roman';"><font color="black" size="2" face="Arial,Helvetica,sans-serif"><em><font size="2">Since the<span style="">&nbsp; </span>first publication of this article at the Relational Journal
                                    in1992 the same technique independently appeared in various publications and in <strong>J. Celko&#8217;s</strong> books &#8220;<a href="http://www.amazon.com/Hierarchies-Smarties-Kaufmann-Management-Systems/dp/1558609202/ref=sr_1_1/105-2132900-8146019?ie=UTF8&amp;amp;s=books&amp;amp;qid=1188334047&amp;amp;sr=8-1" target="_self"><font color="black">SQL for Smarties</font></a>&#8221;
and "Trees and Hierarchies in SQL for Smarties" under the name &#8220;Nested
Sets&#8221;. The same technique has also been implemented in&nbsp;commercial
applications, such as the PeopleSoft suite since the mid-90s. </font></em></font></span></p></div><span style="font-size: 10pt; font-family: 'Times New Roman';"><font color="black" size="2" face="Arial,Helvetica,sans-serif"><br style="page-break-before: always;" clear="all"></font></span>
<font color="black" size="2" face="Arial,Helvetica,sans-serif">                                    </font><h2 style="margin: 12pt 0pt 0pt;"><font color="black" size="2" face="Arial,Helvetica,sans-serif"><a name="_Ref429730477"><font color="black"><span style="font-family: 'Times New Roman';"><em><font size="3">Introduction</font></em></span></font></a><span style="font-family: 'Times New Roman';"><o:p></o:p></span></font></h2>
<font color="black" size="2" face="Arial,Helvetica,sans-serif">                                    </font><p class="Body" style="margin: 12pt 0pt 0pt;"><font color="black" size="2" face="Arial,Helvetica,sans-serif"><font size="2">Man
has used hierarchical decomposition for thousands of years to classify
objects and artifacts, to structure organizations, to plan activities,
to describe physical and conceptual configurations, or to organize
knowledge and events.<span style="">&nbsp; </span>Such
structures are inevitably manifested in dimensional information models
as taxonomies of products, customer segmentations, organizational and
location hierarchies, cost and account decompositions, component
breakdowns, genealogy trees, program structures, to mention only a few.<span style="">&nbsp; </span>For the purposes of this article, we will consider all such hierarchical (tree) dimensions that have the
                                    following characteristics:</font></font></p>
<font color="black" size="2" face="Arial,Helvetica,sans-serif">                                    </font><p class="Enumerate" style="margin: 12pt 0pt 0pt 18pt;"><span style="font-family: 'Times New Roman';"><font color="black" size="2" face="Arial,Helvetica,sans-serif"><font size="2">1.<span style="">&nbsp;&nbsp;&nbsp;&nbsp; </span>They
are defined over some object class (nodes) participating in a binary
relationship type (arcs) forming a tree graph; i.e. each node has at
most one parent and potentially many children. Different branches of
the tree may have different depth. Multiple roots can be viewed as
children of a null parent, making a single tree with a null root.<o:p></o:p></font></font></span></p>
<font color="black" size="2" face="Arial,Helvetica,sans-serif">                                    </font><p class="Enumerate" style="margin: 12pt 0pt 0pt 18pt;"><span style="font-family: 'Times New Roman';"><font color="black" size="2" face="Arial,Helvetica,sans-serif"><font size="2">2.<span style="">&nbsp;&nbsp;&nbsp;&nbsp; </span>The binary relationship that defines the graph is a step relationship such as<span style="">&nbsp; </span>&#8220;is <i style="">parent of&#8221;</i>,<span style="">&nbsp;
                                    </span>&#8220;<i style="">immediately reports to</i>&#8221; or &#8220;<i style="">is part of&#8221;</i>.
Dimensions often have a classifying criterion (reporting, containment
etc.), however explicit hierarchies are suited for arbitrary
segmentation hierarchies such as those used to classify markets or
customers, where the classification rules vary from branch to branch
and level to level. <o:p></o:p></font></font></span></p>
<font color="black" size="2" face="Arial,Helvetica,sans-serif">                                    </font><p class="Enumerate" style="margin: 12pt 0pt 0pt 18pt;"><span style="font-family: 'Times New Roman';"><font color="black" size="2" face="Arial,Helvetica,sans-serif"><font size="2">3.<span style="">&nbsp;&nbsp;&nbsp;&nbsp; </span>A transitive relationship can be recursively defined by chaining these step relationships
                                    in sequence.<span style="">&nbsp; </span>The set of all such transitive relationships that can be generated
                                    is the transitive closure.<span style="">&nbsp; </span>For example, we can define the <i style="">ancestor</i> as either being a <i style="">parent</i>, or an <i style="">ancestor</i> of a <i style="">parent.</i> This is the same as defining ancestors as parents,
                                    parents of parents, parents of parents of parents, and so on.<span style="">&nbsp; </span>Similarly, we can
                                    define <i style="">reports to</i> as the relationship between any two organizations that are connected
                                    by a chain of <i style="">directly reports to</i> relationships. Finally, the <i style="">includes/is used in</i> relationship is similarly derived as a chain of <i style="">part
                                    of</i> relationships.<o:p></o:p></font></font></span></p>
<font color="black" size="2" face="Arial,Helvetica,sans-serif">                                    </font><p class="Body" style="margin: 12pt 0pt 0pt;"><font color="black" size="2" face="Arial,Helvetica,sans-serif"><font size="2">From now on, instead of abstract constructs, we will use the <i style="">organization</i> and the <i style="">reporting</i>
relationship to illustrate the design of recursive dimensions that can
be efficiently queried for transitive closure. These queries can be
used in isolation or as a dimension filter combined into a larger
query. The <span style="">Conclusion</span>
contains some additional thoughts on when to use recursive hierarchies
and what to watch for. </font></font></p>
<font color="black" size="2" face="Arial,Helvetica,sans-serif">                                    </font><p class="Body" style="margin: 12pt 0pt 0pt;"><font color="black" size="2" face="Arial,Helvetica,sans-serif"><font size="2">Our
design will represent the organization as a hierarchical dimension with
one (or more) top nodes, which decompose down to elementary ones,
recursively via the relationship <i style="">reports to</i>.<span style="">&nbsp; </span>The following relation identifies such an organizational
                                    entity:</font></font></p>
<font color="black" size="2" face="Arial,Helvetica,sans-serif">                                    </font><p class="MsoNormal" style="margin: 12pt 0pt 0pt 36pt; text-indent: -36pt;"><span style="font-size: 8pt;"><font color="black" size="2" face="Arial,Helvetica,sans-serif">org(TID, PID, NAME, other properties...)<o:p></o:p></font></span></p>
<font color="black" size="2" face="Arial,Helvetica,sans-serif">                                    </font><p class="Body" style="margin: 12pt 0pt 0pt;"><font color="black" size="2" face="Arial,Helvetica,sans-serif"><font size="2">TID is the &#8220;token ID&#8221; serving as the surrogate name of
                                    the organization dimension.<span style="">&nbsp;&nbsp; </span>The PID is the &#8220;Parent ID&#8221;, denoting
                                    a reference to the parent organization.<span style="">&nbsp; </span>Since this is a hierarchical structure,
                                    at most one parent per node is possible.<span style="">&nbsp; </span>The
highest level organizations will have no parent; i.e. the PID can be
either NULL or the default value. For the purposes of our example, we
will assume the use of numeric TIDs and PIDs and the use of NULL in the
top node PIDs to denote &#8220;no parent&#8221;. </font></font></p>
<font color="black" size="2" face="Arial,Helvetica,sans-serif">                                    </font><p class="Body" style="margin: 12pt 0pt 0pt;"><font color="black" size="2" face="Arial,Helvetica,sans-serif"><font size="2">A
typical problem is to select all organizations directly or indirectly
reporting to a given organization, or to select all organizations to
which a given one (or small list) directly or indirectly reports to.<span style="">&nbsp; </span>This
operation is particularly useful as a dimension filter if it can be
combined with other dimension filters and joined to a fact in one SQL
statement. The example in figure 1 shows the direct reporting
relationships.<span style="">&nbsp; </span>Assume that we need to extract all expenses incurred
                                    by organizations under organization X.<span style="">&nbsp; </span>Two
obvious approaches to solving the problem are to traverse the
structure, or to pre-store the transitive closure relationship in a
table.<span style="">&nbsp; </span>The
traversing of the structure can be achieved either by SQL extensions,
such as the &#8220;Connect By&#8221; clause in Oracle, or a recursive union of the
DB2 family. This can also be done procedurally, by reading successive
layers of children of the organizations within X, but procedures can
not be used as part of larger SQL queries.</font></font></p>
<font color="black" size="2" face="Arial,Helvetica,sans-serif">                                    </font><p class="Body" style="margin: 12pt 0pt 0pt;"><font color="black" size="2" face="Arial,Helvetica,sans-serif"><font size="2">The &#8220;prestored transitive closure&#8221; approach involves an
                                    intermediate table that stores all descendents of X, and a join to the <b style="">org</b>
table. The intermediate table can be temporary, generated every time a
query is issued, or permanent, always containing the transitive closure
of the "<i style="">reports to</i>" relationship. </font></font></p>
<font color="black" size="2" face="Arial,Helvetica,sans-serif">                                    </font><p class="Body" style="margin: 12pt 0pt 0pt;"><font color="black" size="2" face="Arial,Helvetica,sans-serif"><font size="2">Each
of these solutions has its own disadvantages: The first one actually
&#8220;walks the structure&#8221; requiring multiple requests to extract children
sets for each node retrieved.<span style="">&nbsp; </span>The advantage of this approach is that it does not introduce any update anomalies since no redundant data
                                    is maintained.<span style="">&nbsp; </span>The
second solution uses set processing, but it requires that a temporary
table be first built (and indexed) or one must permanently maintain a
very large redundant table and deal with the associated update
anomalies.<span style="">&nbsp; </span>A
tree five layers deep with a fanout of 10 children per node has a total
of 11,111 nodes, 11,110 parent-child relationships, but its transitive
closure contains over 11,000,000 ancestor descendent relationships.<span style="">&nbsp; </span>A
single maintenance operation may affect over one million of these
ancestor descendent relationships. The cost of this approach grows
geometrically as the fanout and depth grows. The maintenance
complications and lack of scalability make this option undesirable. </font></font></p>
<font color="black" size="2" face="Arial,Helvetica,sans-serif">                                    </font><p class="Body" style="margin: 12pt 0pt 0pt;"><font color="black" size="2" face="Arial,Helvetica,sans-serif"><font size="2">Before
discussing a better alternative, it is worth considering yet another
interesting problem: &#8220;Given two organizations, verify that directly or
indirectly one reports to the other&#8221;.<span style="">&nbsp; </span>The structure traversal would require comparing all the descendents and ancestors
                                    of the first organization to the second.<span style="">&nbsp; </span>A
better approach would be to take the ancestor path to the top from each
of the two nodes and verify if the other node is in it. The cost will
then be less than <i style="">2h</i> where <i style="">h</i> is the maximum depth of the
                                    organizational tree.<span style="">&nbsp; </span>Alternatively,
it would require searching for the existence of the pair in the
transitive closure set, if physically maintained. A generalization of
this variant of dimension filtering selects nodes using both ancestor
and descendent set qualification:<span style="">&nbsp; </span>&#8220;select

all departments that belong to these divisions and have offices at
these locations&#8221; or &#8220;select all market segment/locations of college
students with at least 50% state college participation&#8221;. </font>
                                    <!--"''"--></font></p></div><font color="black" size="2" face="Arial,Helvetica,sans-serif"></font>
                                 <p></p>
                                 <p align="center">
                                    </p><div align="center">
                                       <table border="0" cellpadding="0" cellspacing="0">
                                          <tbody><tr>
                                             <td align="center" background="0316%20Recursive%20Hierarchies-%20The%20Relational%20Taboo_files/spacer.gif">
                                                <table align="center" border="1" bordercolor="black" cellpadding="0" cellspacing="0">
                                                   <tbody><tr>
                                                      <td>
                                                         <table align="center" border="0" cellpadding="0" cellspacing="0">
                                                            <tbody><tr>
                                                               <td colspan="3" bgcolor="#ffffff" height="13"><img src="0316%20Recursive%20Hierarchies-%20The%20Relational%20Taboo_files/blank.gif" alt="" border="0"></td>
                                                            </tr>
                                                            <tr>
                                                               <td bgcolor="#ffffff" width="13"><img src="0316%20Recursive%20Hierarchies-%20The%20Relational%20Taboo_files/blank.gif" alt="" border="0" width="13" height="1"></td>
                                                               <td><img alt="image002.gif" src="0316%20Recursive%20Hierarchies-%20The%20Relational%20Taboo_files/image002.gif" border="" vspace="0" width="240" hspace="0"></td>
                                                               <td bgcolor="#ffffff" width="13"><img src="0316%20Recursive%20Hierarchies-%20The%20Relational%20Taboo_files/blank.gif" alt="" border="0" width="13" height="1"></td>
                                                            </tr>
                                                            <tr>
                                                               <td colspan="3" bgcolor="#ffffff" height="13"><img src="0316%20Recursive%20Hierarchies-%20The%20Relational%20Taboo_files/blank.gif" alt="" border="0" width="1" height="1"></td>
                                                            </tr>
                                                         </tbody></table>
                                                      </td>
                                                   </tr>
                                                </tbody></table>
                                             </td>
                                          </tr>
                                          <tr>
                                             <td align="center" background="0316%20Recursive%20Hierarchies-%20The%20Relational%20Taboo_files/spacer.gif" width="270"><font color="black" size="1" face="Arial,Helvetica,sans-serif">Figure 1: A Tree Graph with L &amp; R Numbers assigned</font></td>
                                          </tr>
                                       </tbody></table>
                                    </div>
                                 <p></p>
                                 <p><font color="black" size="2" face="Arial,Helvetica,sans-serif"><div class="Section1"><font size="2">The
problem with these graph-selections is the impracticality of
maintaining large redundant transitive closure tables, or the low
performance of path traversal using recursive SQL extensions.
Fortunately, there is an alternative, that uses an old idea,
topological ordering, to pre-enumerate the nodes at maintenance time,
so that ancestor-descendent queries can be simple and fast. </font></div>
                                    <h1 style="margin: 12pt 0pt 0pt;"><span style="font-family: 'Times New Roman';"><font size="2">The LR Design Approach<o:p></o:p></font></span></h1>
                                    <p class="Body" style="margin: 12pt 0pt 0pt;"><font size="2">Observe the tree in figure 1.<span style="">&nbsp;
                                    </span>Let the nodes represent <b style="">org</b> entities, and let arcs denote "<i style="">immediately reports to</i>&#8221; relations.<span style="">&nbsp; </span>Notice
the two numbers that lie on the left and right of each node. Can you
see how they can be used to identify all ancestor-descendant relations?<span style="">&nbsp; </span>Check how each node's numbers are between the left and right number of each of their
                                    ancestors.<span style="">&nbsp; </span>In addition, a node's two numbers define the outside boundaries of
                                    all their descendants' numbers.</font></p>
                                    <p class="Body" style="margin: 12pt 0pt 0pt;"><font size="2">Let's call these two numbers <b style="">L</b>
                                    and <b style="">R</b> for the left and right one respectively.<span style="">&nbsp;
                                    </span>These attributes encode the hierarchical ordering of the organizational entity in the whole hierarchy in a way that
                                    can be used in set queries.<span style="">&nbsp; </span>Here are the rules that govern their use:</font></p>
                                    <p class="Enumerate" style="margin: 12pt 0pt 0pt 18pt;"><span style="font-family: 'Times New Roman';"><font size="2">1.<span style="">&nbsp;&nbsp;&nbsp;&nbsp; </span><b style="">L</b> and <b style="">R</b>
                                    share a common domain of ordered values.<span style="">&nbsp; </span>This domain is chosen to be a binary
                                    integer. A given value of this domain can be used only once, either as an <b style="">L</b> or
                                    an <b style="">R</b> value but not as both an <b style="">L</b> and
                                    an <b style="">R</b> value. For a given node, the <b style="">L</b>
                                    value shall be strictly less than the <b style="">R</b> value<o:p></o:p></font></span></p>
                                    <p class="Enumerate" style="margin: 12pt 0pt 0pt 18pt;"><span style="font-family: 'Times New Roman';"><font size="2">2.<span style="">&nbsp;&nbsp;&nbsp;&nbsp; </span><b style="">L</b> and <b style="">R</b>,

although unique, they shall not be used for external identification of
any entity, like we never use Row IDs to reference a row in a table.
They can be arbitrarily reassigned to better facilitate efficient
retrieval, in the same spirit that tables and indexes may be
reorganized to facilitate efficient retrieval.<span style="">&nbsp; </span><o:p></o:p></font></span></p>
                                    <p class="Enumerate" style="margin: 12pt 0pt 0pt 18pt;"><span style="font-family: 'Times New Roman';"><font size="2">3.<span style="">&nbsp;&nbsp;&nbsp;&nbsp; </span>Any two nodes satisfy the ancestor-descendent relationship exactly when the descendent's
                                    <b style="">L</b> (or <b style="">R)</b> value is between the ancestor's
                                    <b style="">L</b> and <b style="">R</b> values:<o:p></o:p></font></span></p>
                                    <p class="Enumerate" style="margin: 12pt 0pt 0pt 18pt; text-align: center;" align="left"><sub><span style=""></span></sub><span style="font-family: 'Times New Roman';"><o:p></o:p></span>
                                    <!--"''"--></p></font>
                                 </p>
                                 
                                 <p align="center"><img alt="image004.gif" src="0316%20Recursive%20Hierarchies-%20The%20Relational%20Taboo_files/image004.gif" border="" vspace="0" hspace="0"></p>
                                 <p align="center"><img alt="image006.gif" src="0316%20Recursive%20Hierarchies-%20The%20Relational%20Taboo_files/image006.gif" border="" vspace="0" hspace="0"></p>
                                 <p><font color="black" size="2" face="Arial,Helvetica,sans-serif"></font></p><div><span style="font-family: 'Times New Roman';"><font color="black" size="2" face="Arial,Helvetica,sans-serif"><font size="2"><span style="">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="">&nbsp;</span>Simply, all <b style="">L</b> and <b style="">R</b> values of nodes hierarchically subordinate to a given node, are between its <b style="">L</b> and <b style="">R</b> range, and no node that is not hierarchically subordinate
                                    to it satisfies this property.<span style="">&nbsp; </span>For example if <b style="">l</b> and <b style="">r</b> are the respective <b style="">L</b>
                                    and <b style="">R</b> values of some organization, then all organizations directly or indirectly
                                    reporting to it will have their <b style="">L</b> between <b style="">l</b>
                                    and <b style="">r</b>. <o:p></o:p></font></font></span>
<font color="black" size="2" face="Arial,Helvetica,sans-serif">                                    </font><p class="Body" style="margin: 12pt 0pt 0pt;"><font color="black" size="2" face="Arial,Helvetica,sans-serif"><font size="2">The <b style="">L</b> and <b style="">R</b> numbers can be viewed as intervals. Each parent&#8217;s interval covers the sum of the intervals of all its
                                    children. These intervals define a topological ordering over the nodes. The assignment of <b style="">L/R</b>
values is the result of numbering the nodes of a tree depth-first,
traversing the nodes from left to right. During the enumeration
process, each node is visited coming once from the top and a second and
last time from below, after visiting all its descendents. At these two
visits, the L and R attributes are set respectively, assigned next
sequential values dispensed off a counter. Figure 1 shows this
numbering sequence. </font></font></p>
<font color="black" size="2" face="Arial,Helvetica,sans-serif">                                    </font><p class="Body" style="margin: 12pt 0pt 0pt;"><font color="black" size="2" face="Arial,Helvetica,sans-serif"><font size="2">Figure 2 shows two queries and a view.<span style="">&nbsp;
                                    </span>Case 1 returns the ancestors, and case 2 returns the descendents of the node named QNAME.<span style="">&nbsp; </span>Two references are made to the same table, &#8216;A&#8217; being the correlation name for the &#8220;ancestor&#8221;
                                    role, and &#8216;D&#8217; being the &#8220;descendent&#8221; role.<span style="">&nbsp; </span>All
queries use the same predicate to restrict the descendent nodes&#8217; L
values to fall in the (A.L..A.R) range. </font></font></p>
<font color="black" size="2" face="Arial,Helvetica,sans-serif">                                    </font><p class="FigureCaption" style="margin: 12pt 0pt 0pt;"><span style="font-family: 'Times New Roman';"><font color="black" size="2" face="Arial,Helvetica,sans-serif"><strong><font size="2">Figure<span style="">2</span>----Tree Queries<o:p></o:p></font></strong></font></span></p>
<font color="black" size="2" face="Arial,Helvetica,sans-serif">                                    </font><div style="border-style: none none solid; border-color: -moz-use-text-color -moz-use-text-color windowtext; border-width: medium medium 0.75pt; padding: 0pt 0pt 1pt;">
<font color="black" size="2" face="Arial,Helvetica,sans-serif">                                    </font><p class="MsoNormal" style="border: medium none ; margin: 0pt 0pt 12pt; padding: 0pt;"><span style="font-family: 'Times New Roman';"><font color="black" size="2" face="Arial,Helvetica,sans-serif"><font size="2">&nbsp;<o:p></o:p></font></font></span></p></div>
<font color="black" size="2" face="Arial,Helvetica,sans-serif">                                    </font><div style="border: 0.75pt solid windowtext; padding: 1pt;">
<font color="black" size="2" face="Arial,Helvetica,sans-serif">                                    </font><p class="MsoNormal" style="border: medium none ; margin: 0pt; padding: 0pt;"><span style="font-family: 'Times New Roman';"><font color="black" size="2" face="Arial,Helvetica,sans-serif"><font size="2">case 1:<span style="">&nbsp; </span>Query of organization ancestors of QNAME (reporting chain up)<o:p></o:p></font></font></span></p>
<font color="black" size="2" face="Arial,Helvetica,sans-serif">                                    </font><p class="MsoNormal" style="border: medium none ; margin: 0pt; padding: 0pt;"><font color="black" size="2" face="Arial,Helvetica,sans-serif"><b style=""><span style=""><font size="2">&nbsp;<o:p></o:p></font></span></b></font></p>
<font color="black" size="2" face="Arial,Helvetica,sans-serif">                                    </font><p class="MsoNormal" style="border: medium none ; margin: 0pt; padding: 0pt;"><font color="black" size="2" face="Arial,Helvetica,sans-serif"><font size="2"><b style=""><span style="font-family: 'Times New Roman';">select </span></b><span style="font-family: 'Times New Roman';"><span style="">&nbsp;</span><span style="">&nbsp;&nbsp; </span>A.NAME,<span style="">&nbsp;&nbsp; </span>. . .<o:p></o:p></span></font></font></p>
<font color="black" size="2" face="Arial,Helvetica,sans-serif">                                    </font><p class="MsoNormal" style="border: medium none ; margin: 0pt; padding: 0pt;"><font color="black" size="2" face="Arial,Helvetica,sans-serif"><font size="2"><b style=""><span style="font-family: 'Times New Roman';">from </span></b><span style="font-family: 'Times New Roman';"><span style="">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
                                    </span>ORG<span style="">&nbsp; </span>A, ORG<span style="">&nbsp;&nbsp; </span>D<o:p></o:p></span></font></font></p>
<font color="black" size="2" face="Arial,Helvetica,sans-serif">                                    </font><p class="MsoNormal" style="border: medium none ; margin: 0pt; padding: 0pt;"><font color="black" size="2" face="Arial,Helvetica,sans-serif"><font size="2"><b style=""><span style="font-family: 'Times New Roman';">where</span></b><span style="font-family: 'Times New Roman';"> <span style="">&nbsp;&nbsp;&nbsp;
                                    </span>D.NAME = :QNAME <b style="">and<o:p></o:p></b></span></font></font></p>
<font color="black" size="2" face="Arial,Helvetica,sans-serif">                                    </font><p class="MsoNormal" style="border: medium none ; margin: 0pt; padding: 0pt;"><span style="font-family: 'Times New Roman';"><font color="black" size="2" face="Arial,Helvetica,sans-serif"><font size="2"><span style="">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span>D.L <b style="">between</b> A.L<span style="">&nbsp; </span><b style="">and</b> A.R<o:p></o:p></font></font></span></p>
<font color="black" size="2" face="Arial,Helvetica,sans-serif">                                    </font><p class="MsoNormal" style="border: medium none ; margin: 0pt; padding: 0pt;"><span style="font-family: 'Times New Roman';"><font color="black" size="2" face="Arial,Helvetica,sans-serif"><font size="2"><span style="">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span><o:p></o:p></font></font></span></p>
<font color="black" size="2" face="Arial,Helvetica,sans-serif">                                    </font><p class="MsoNormal" style="border: medium none ; margin: 0pt; padding: 0pt;"><span style="font-family: 'Times New Roman';"><font color="black" size="2" face="Arial,Helvetica,sans-serif"><font size="2">&nbsp;<o:p></o:p></font></font></span></p>
<font color="black" size="2" face="Arial,Helvetica,sans-serif">                                    </font><p class="MsoNormal" style="border: medium none ; margin: 0pt; padding: 0pt;"><span style="font-family: 'Times New Roman';"><font color="black" size="2" face="Arial,Helvetica,sans-serif"><font size="2">Case2: Query returning
                                    set of all direct and indirect reports to node identified by :QNAME as of :QDATE:<o:p></o:p></font></font></span></p>
<font color="black" size="2" face="Arial,Helvetica,sans-serif">                                    </font><p class="MsoNormal" style="border: medium none ; margin: 0pt; padding: 0pt;"><font color="black" size="2" face="Arial,Helvetica,sans-serif"><b style=""><span style=""><font size="2">&nbsp;<o:p></o:p></font></span></b></font></p>
<font color="black" size="2" face="Arial,Helvetica,sans-serif">                                    </font><p class="MsoNormal" style="border: medium none ; margin: 0pt; padding: 0pt;"><font color="black" size="2" face="Arial,Helvetica,sans-serif"><font size="2"><b style=""><span style="font-family: 'Times New Roman';">select </span></b><span style="font-family: 'Times New Roman';"><span style="">&nbsp;</span><span style="">&nbsp;&nbsp; </span>D.NAME,<span style="">&nbsp; </span>. . .<o:p></o:p></span></font></font></p>
<font color="black" size="2" face="Arial,Helvetica,sans-serif">                                    </font><p class="MsoNormal" style="border: medium none ; margin: 0pt; padding: 0pt;"><font color="black" size="2" face="Arial,Helvetica,sans-serif"><font size="2"><b style=""><span style="font-family: 'Times New Roman';">from </span></b><span style="font-family: 'Times New Roman';"><span style="">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
                                    </span>ORG<span style="">&nbsp; </span>A, ORG<span style="">&nbsp;&nbsp; </span>D<o:p></o:p></span></font></font></p>
<font color="black" size="2" face="Arial,Helvetica,sans-serif">                                    </font><p class="MsoNormal" style="border: medium none ; margin: 0pt; padding: 0pt;"><font color="black" size="2" face="Arial,Helvetica,sans-serif"><font size="2"><b style=""><span style="font-family: 'Times New Roman';">where</span></b><span style="font-family: 'Times New Roman';"> <span style="">&nbsp;&nbsp;&nbsp;
                                    </span>A.NAME = :QNAME <b style="">and<o:p></o:p></b></span></font></font></p>
<font color="black" size="2" face="Arial,Helvetica,sans-serif">                                    </font><p class="MsoNormal" style="border: medium none ; margin: 0pt; padding: 0pt;"><span style="font-family: 'Times New Roman';"><font color="black" size="2" face="Arial,Helvetica,sans-serif"><font size="2"><span style="">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span>D.L<span style="">&nbsp; </span><b style="">between</b> A.L<span style="">&nbsp; </span><b style="">and</b><span style="">&nbsp; </span>A.R<o:p></o:p></font></font></span></p>
<font color="black" size="2" face="Arial,Helvetica,sans-serif">                                    </font><p class="MsoNormal" style="border: medium none ; margin: 0pt; padding: 0pt;"><span style="font-family: 'Times New Roman';"><font color="black" size="2" face="Arial,Helvetica,sans-serif"><font size="2">&nbsp;<o:p></o:p></font></font></span></p>
<font color="black" size="2" face="Arial,Helvetica,sans-serif">                                    </font><p class="MsoNormal" style="border: medium none ; margin: 0pt; padding: 0pt;"><span style="font-family: 'Times New Roman';"><font color="black" size="2" face="Arial,Helvetica,sans-serif"><font size="2">Case 3:<span style="">&nbsp; </span>View returning ANAMEs of ancestors of :descendents DNAME as of :QDATE;<o:p></o:p></font></font></span></p>
<font color="black" size="2" face="Arial,Helvetica,sans-serif">                                    </font><p class="MsoNormal" style="border: medium none ; margin: 0pt; padding: 0pt;"><span style="font-family: 'Times New Roman';"><font color="black" size="2" face="Arial,Helvetica,sans-serif"><font size="2">&nbsp;<o:p></o:p></font></font></span></p>
<font color="black" size="2" face="Arial,Helvetica,sans-serif">                                    </font><p class="MsoNormal" style="border: medium none ; margin: 0pt; padding: 0pt;"><font color="black" size="2" face="Arial,Helvetica,sans-serif"><font size="2"><b style=""><span style="font-family: 'Times New Roman';">create view </span></b><span style="font-family: 'Times New Roman';"><span style="">&nbsp;</span>org_anc<span style="">&nbsp; </span><b style="">(</b>DNAME, ANAME<b style="">, </b>. . .) <b style="">as<o:p></o:p></b></span></font></font></p>
<font color="black" size="2" face="Arial,Helvetica,sans-serif">                                    </font><p class="MsoNormal" style="border: medium none ; margin: 0pt; padding: 0pt;"><font color="black" size="2" face="Arial,Helvetica,sans-serif"><font size="2"><b style=""><span style="font-family: 'Times New Roman';">select </span></b><span style="font-family: 'Times New Roman';"><span style="">&nbsp;</span><span style="">&nbsp;&nbsp; </span>D.NAME, A.NAME<span style="">&nbsp;&nbsp; </span>. . .<o:p></o:p></span></font></font></p>
<font color="black" size="2" face="Arial,Helvetica,sans-serif">                                    </font><p class="MsoNormal" style="border: medium none ; margin: 0pt; padding: 0pt;"><font color="black" size="2" face="Arial,Helvetica,sans-serif"><font size="2"><b style=""><span style="font-family: 'Times New Roman';">from </span></b><span style="font-family: 'Times New Roman';"><span style="">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
                                    </span>ORG<span style="">&nbsp;&nbsp; </span>A, ORG<span style="">&nbsp;&nbsp; </span>D<o:p></o:p></span></font></font></p>
<font color="black" size="2" face="Arial,Helvetica,sans-serif">                                    </font><p class="MsoNormal" style="border: medium none ; margin: 0pt; padding: 0pt;"><font color="black" size="2" face="Arial,Helvetica,sans-serif"><font size="2"><b style=""><span style="font-family: 'Times New Roman';">where</span></b><span style="font-family: 'Times New Roman';"> <span style="">&nbsp;&nbsp;&nbsp;
                                    </span>D.L<span style="">&nbsp; </span><b style="">between</b><span style="">&nbsp;&nbsp; </span>A.L<span style="">&nbsp; </span><b style="">and </b>A.R<b style=""><o:p></o:p></b></span></font></font></p></div>
<font color="black" size="2" face="Arial,Helvetica,sans-serif">                                    </font><div style="border-style: none none solid; border-color: -moz-use-text-color -moz-use-text-color windowtext; border-width: medium medium 0.75pt; padding: 0pt 0pt 1pt;">
<font color="black" size="2" face="Arial,Helvetica,sans-serif">                                    </font><p class="MsoNormal" style="border: medium none ; margin: 0pt; padding: 0pt;"><span style="font-family: 'Times New Roman';"><font color="black" size="2" face="Arial,Helvetica,sans-serif"><font size="2">&nbsp;<o:p></o:p></font></font></span></p></div>
<font color="black" size="2" face="Arial,Helvetica,sans-serif">                                    </font><p class="Body" style="margin: 12pt 0pt 0pt;"><font color="black" size="2" face="Arial,Helvetica,sans-serif"><font size="2">Case
3 shows a view that relates descendents and ancestors. This view can be
used either to return sets of ancestors by descendent given a set of
descendents, or sets of descendents by ancestor given a set of
ancestors. If we were to physically store this table, it would have the
contents of the transitive closure table discussed in the <span style="">Introduction</span>.
Instead of joining the transitive closure table, we will use the
&#8220;between&#8221; predicate to do the filtering for us. Having faith in the
optimizer, the DBMS will push selections through the view to develop a
plan equivalent to case 1 or 2. </font></font></p>
<font color="black" size="2" face="Arial,Helvetica,sans-serif">                                    </font><p class="Body" style="margin: 12pt 0pt 0pt;"><font color="black" size="2" face="Arial,Helvetica,sans-serif"><font size="2">An
often-posed question is &#8220;Why don&#8217;t we use a hierarchical keyword to
achieve the same result?&#8221; For example, an IP address like scheme could
enumerate the levels like 1,1.1,1.2,1.3,1.1.1 etc. The problem with
this scheme is that all qualifications need to start from the top.
Otherwise, we will have to scan the whole index or table. With the L/R
enumeration however, we can relate any node to any other and still
employ index scans. </font></font></p>
<font color="black" size="2" face="Arial,Helvetica,sans-serif">                                    </font><h2 style="margin: 12pt 0pt 0pt;"><span style="font-family: 'Times New Roman';"><font color="black" size="2" face="Arial,Helvetica,sans-serif"><em><font size="3">Performance of the L/R Method
                                    <o:p></o:p></font></em></font></span></h2>
<font color="black" size="2" face="Arial,Helvetica,sans-serif">                                    </font><p class="Body" style="margin: 12pt 0pt 0pt;"><font color="black" size="2" face="Arial,Helvetica,sans-serif"><font size="2">Descendent seeking queries are the most efficient. Ancestor seeking
                                    ones can be reduced to half an index-only scan.<span style="">&nbsp; </span>A combined index on <b style="">L</b> (descending), <b style="">R</b> (ascending) helps ancestor searches.<span style="">&nbsp; </span>The <i style="">between</i> predicate for this type of search has an unusual
                                    form, restricting a constant between two columns.<span style="">&nbsp; </span>This
situation will result in a matching lookup of the descendent&#8217;s L value
on the combined index, and a scan to the end of the index.<span style="">&nbsp; </span>The best we can achieve in this case is to use index only access.<span style="">&nbsp;
                                    </span>The average cost of this query will be that of scanning half the index since every value in the domain of <b style="">L</b> is equally likely for the constant.</font></font></p>
<font color="black" size="2" face="Arial,Helvetica,sans-serif">                                    </font><p class="Body" style="margin: 12pt 0pt 0pt;"><font color="black" size="2" face="Arial,Helvetica,sans-serif"><font size="2">For the more common descendent-seeking queries, the selected rows
                                    qualify whenever their <b style="">L</b> is between two constants, i.e. the <b style="">L</b> and <b style="">R </b>of the given ancestor. Such a query will consequently use
                                    a matching lookup, to locate the lower bound of the "<b style=""><i style="">between</i></b>", and scan the index until the upper bound is reached.<span style="">&nbsp; </span>These
                                    queries are very efficient, since all scanned index entries qualify. </font></font></p>
<font color="black" size="2" face="Arial,Helvetica,sans-serif">                                    </font><p class="Body" style="margin: 12pt 0pt 0pt;"><font color="black" size="2" face="Arial,Helvetica,sans-serif"><font size="2">The
performance advantage of the L/R method over the SQL recursive union or
Connect By clause is about a level of magnitude. This advantage is
because most of the work is done up-front, and the topological ordering
of the nodes is already accomplished and captured in the L/R interval
indexing. Here are a few points on the L/R performance:</font></font></p>
<font color="black" size="2" face="Arial,Helvetica,sans-serif">                                    </font><p class="Body" style="margin: 12pt 0pt 0pt 36pt; text-indent: -18pt;"><font color="black" size="2" face="Arial,Helvetica,sans-serif"><font size="2">1.</font><span style="font-family: 'Times New Roman'; font-style: normal; font-variant: normal; font-weight: normal; font-size: 7pt; line-height: normal; font-size-adjust: none; font-stretch: normal; -x-system-font: none;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span><font size="2">To

detect whether two nodes have an ancestor-descendent relationship
normally requires the traversal of the path from one node to the other.
Using the L/R numbers however, any two nodes can be tested by using a
simple <b style="">between</b> clause without traversing the graph.</font></font></p>
<font color="black" size="2" face="Arial,Helvetica,sans-serif">                                    </font><p class="Body" style="margin: 12pt 0pt 0pt 36pt; text-indent: -18pt;"><font color="black" size="2" face="Arial,Helvetica,sans-serif"><a name="_Ref429732135"><font color="black"><font size="2">2.</font><span style="font-family: 'Times New Roman'; font-style: normal; font-variant: normal; font-weight: normal; font-size: 7pt; line-height: normal; font-size-adjust: none; font-stretch: normal; -x-system-font: none;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span><font size="2">Since

the L/R method does not need to traverse the structure, other more
selective predicates may filter down the qualifying rows before the
ancestor-descendent qualification is applied. In recursive SQL, path
traversal needs to happen upon unconstrained node sets, postponing
highly filtering predicates until after the paths have been
exhaustively traversed.</font></font></a></font></p>
<font color="black" size="2" face="Arial,Helvetica,sans-serif">                                    </font><p class="Body" style="margin: 12pt 0pt 0pt 36pt; text-indent: -18pt;"><font color="black" size="2" face="Arial,Helvetica,sans-serif"><font size="2">3.</font><span style="font-family: 'Times New Roman'; font-style: normal; font-variant: normal; font-weight: normal; font-size: 7pt; line-height: normal; font-size-adjust: none; font-stretch: normal; -x-system-font: none;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span><font size="2">L/R

descendant selection subqueries scale well, even in MPP share-nothing
environments. The simple ancestor-descendent range test is
partitionable and can be combined with other partitionable filtering
predicates; thus achieving distributed dimension qualification.
Recursive SQL requires multiple directed invocations of the
children-seeking query before applying other predicates. This approach
pays for latency delay roughly proportional to the depth of the
traversed tree, in addition to the implication discussed under item <span style="">2 above</span>.</font></font></p>
<font color="black" size="2" face="Arial,Helvetica,sans-serif">                                    </font><h2 style="margin: 12pt 0pt 0pt;"><span style="font-family: 'Times New Roman';"><font color="black" size="2" face="Arial,Helvetica,sans-serif"><em><font size="3">Using L/R Dimensions in Star
                                    Joins <o:p></o:p></font></em></font></span></h2>
<font color="black" size="2" face="Arial,Helvetica,sans-serif">                                    </font><p class="Body" style="margin: 12pt 0pt 0pt;"><font color="black" size="2" face="Arial,Helvetica,sans-serif"><font size="2">Let&#8217;s see how the subqueries we discussed over isolated dimensions
                                    can be integrated into fact joins with multiple dimensions.<span style="">&nbsp; </span>We will have to extend
                                    the example with a fact table, say one that captures financial data: <b style="">cost(ORG, TYPE,
                                    PERIOD, AMT)</b>.
It references lowest level nodes of the organizational hierarchy, a
type hierarchy and a time period hierarchy, and captures the period
amount as a metric. For every period, organization and type, a fact is
recorded. The schema for our little example is described at the top of
figure 3. Next are the definitions of ORG_TC and TYPE_TC views that
capture the transitive closure as described earlier for the
organization (ORG) and cost type (TYPE) dimensions respectively. These
views contain the attributes for each ancestor and each descendent
pair, prefixed with A and D respectively. </font></font></p>
<font color="black" size="2" face="Arial,Helvetica,sans-serif">                                    </font><p class="FigureCaption" style="margin: 12pt 0pt 0pt;"><span style="font-family: 'Times New Roman';"><font color="black" size="2" face="Arial,Helvetica,sans-serif"><strong><font size="2">Figure
                                    3 ----Dimensions in Context<o:p></o:p></font></strong></font></span></p>
<font color="black" size="2" face="Arial,Helvetica,sans-serif">                                    </font><div style="border-style: none none solid; border-color: -moz-use-text-color -moz-use-text-color windowtext; border-width: medium medium 0.75pt; padding: 0pt 0pt 1pt;">
<font color="black" size="2" face="Arial,Helvetica,sans-serif">                                    </font><p class="MsoNormal" style="border: medium none ; margin: 0pt 0pt 12pt; padding: 0pt;"><span style="font-family: 'Times New Roman';"><font color="black" size="2" face="Arial,Helvetica,sans-serif"><font size="2">&nbsp;<o:p></o:p></font></font></span></p></div>
<font color="black" size="2" face="Arial,Helvetica,sans-serif">                                    </font><div style="border: 0.75pt solid windowtext; padding: 6pt 10pt 15pt 6pt;">
<font color="black" size="2" face="Arial,Helvetica,sans-serif">                                    </font><p class="MsoNormal" style="border: medium none ; margin: 0pt; padding: 0pt;"><font color="black" size="2" face="Arial,Helvetica,sans-serif"><font size="2"><b style=""><u><span style="font-family: 'Times New Roman';">Schema</span></u></b><b style=""><span style="font-family: 'Times New Roman';">:<o:p></o:p></span></b></font></font></p>
<font color="black" size="2" face="Arial,Helvetica,sans-serif">                                    </font><p class="MsoNormal" style="border: medium none ; margin: 0pt; padding: 0pt;"><font color="black" size="2" face="Arial,Helvetica,sans-serif"><font size="2"><b style=""><span style="font-family: 'Times New Roman';">org </span></b><span style="font-family: 'Times New Roman';"><span style="">&nbsp;</span><span style="">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span>TID, PID, NAME, L, R, LEVEL<span style="">&nbsp; </span>. . .<o:p></o:p></span></font></font></p>
<font color="black" size="2" face="Arial,Helvetica,sans-serif">                                    </font><p class="MsoNormal" style="border: medium none ; margin: 0pt; padding: 0pt;"><font color="black" size="2" face="Arial,Helvetica,sans-serif"><font size="2"><b style=""><span style="font-family: 'Times New Roman';">type</span></b><span style="font-family: 'Times New Roman';"><span style="">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
                                    </span>TID, PID, NAME, L, R, CLASS, POSTING?<o:p></o:p></span></font></font></p>
<font color="black" size="2" face="Arial,Helvetica,sans-serif">                                    </font><p class="MsoNormal" style="border: medium none ; margin: 0pt; padding: 0pt;"><font color="black" size="2" face="Arial,Helvetica,sans-serif"><font size="2"><b style=""><span style="font-family: 'Times New Roman';">period</span></b><span style="font-family: 'Times New Roman';"> <span style="">&nbsp;&nbsp;&nbsp;
                                    </span>WK_END_DT, MONTH, YEAR<o:p></o:p></span></font></font></p>
<font color="black" size="2" face="Arial,Helvetica,sans-serif">                                    </font><p class="MsoNormal" style="border: medium none ; margin: 0pt; padding: 0pt;"><font color="black" size="2" face="Arial,Helvetica,sans-serif"><font size="2"><b style=""><span style="font-family: 'Times New Roman';">cost</span></b><span style="font-family: 'Times New Roman';"><span style="">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
                                    </span>ORG, TYPE, PERIOD, AMT<o:p></o:p></span></font></font></p>
<font color="black" size="2" face="Arial,Helvetica,sans-serif">                                    </font><p class="alg" style="border: medium none ; margin: 0pt; padding: 0pt;"><span style="font-size: 10pt; font-family: 'Times New Roman';"><font color="black" size="2" face="Arial,Helvetica,sans-serif">&nbsp;<o:p></o:p></font></span></p>
<font color="black" size="2" face="Arial,Helvetica,sans-serif">                                    </font><p class="MsoNormal" style="border: medium none ; margin: 0pt; padding: 0pt;"><font color="black" size="2" face="Arial,Helvetica,sans-serif"><font size="2"><b style=""><u><span style="font-family: 'Times New Roman';">Transitive Closure Views</span></u></b><u><span style="font-family: 'Times New Roman';">:<o:p></o:p></span></u></font></font></p>
<font color="black" size="2" face="Arial,Helvetica,sans-serif">                                    </font><p class="MsoNormal" style="border: medium none ; margin: 0pt; padding: 0pt;"><font color="black" size="2" face="Arial,Helvetica,sans-serif"><font size="2"><b style=""><span style="font-family: 'Times New Roman';">create view </span></b><span style="font-family: 'Times New Roman';"><span style="">&nbsp;</span>org_tc<span style="">&nbsp; </span><b style="">(</b>DTID<b style="">,</b>DNAME,
                                    ATID,ANAME<b style="">, </b>. . .) <b style="">as<o:p></o:p></b></span></font></font></p>
<font color="black" size="2" face="Arial,Helvetica,sans-serif">                                    </font><p class="MsoNormal" style="border: medium none ; margin: 0pt; padding: 0pt;"><font color="black" size="2" face="Arial,Helvetica,sans-serif"><font size="2"><b style=""><span style="font-family: 'Times New Roman';">select </span></b><span style="font-family: 'Times New Roman';"><span style="">&nbsp;</span><span style="">&nbsp;&nbsp; </span>D.TID,D.NAME, A.TID, A.NAME<span style="">&nbsp;&nbsp; </span>.
                                    . .<o:p></o:p></span></font></font></p>
<font color="black" size="2" face="Arial,Helvetica,sans-serif">                                    </font><p class="MsoNormal" style="border: medium none ; margin: 0pt; padding: 0pt;"><font color="black" size="2" face="Arial,Helvetica,sans-serif"><font size="2"><b style=""><span style="font-family: 'Times New Roman';">from </span></b><span style="font-family: 'Times New Roman';"><span style="">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
                                    </span>ORG<span style="">&nbsp;&nbsp; </span>A, ORG<span style="">&nbsp;&nbsp; </span>D<o:p></o:p></span></font></font></p>
<font color="black" size="2" face="Arial,Helvetica,sans-serif">                                    </font><p class="MsoNormal" style="border: medium none ; margin: 0pt; padding: 0pt;"><font color="black" size="2" face="Arial,Helvetica,sans-serif"><font size="2"><b style=""><span style="font-family: 'Times New Roman';">where</span></b><span style="font-family: 'Times New Roman';"> <span style="">&nbsp;&nbsp;&nbsp;
                                    </span>D.L<span style="">&nbsp; </span><b style="">between</b><span style="">&nbsp;&nbsp; </span>A.L<span style="">&nbsp; </span><b style="">and </b>A.R<b style=""><o:p></o:p></b></span></font></font></p>
<font color="black" size="2" face="Arial,Helvetica,sans-serif">                                    </font><p class="MsoNormal" style="border: medium none ; margin: 0pt; padding: 0pt;"><font color="black" size="2" face="Arial,Helvetica,sans-serif"><b style=""><span style=""><font size="2">&nbsp;<o:p></o:p></font></span></b></font></p>
<font color="black" size="2" face="Arial,Helvetica,sans-serif">                                    </font><p class="MsoNormal" style="border: medium none ; margin: 0pt; padding: 0pt;"><font color="black" size="2" face="Arial,Helvetica,sans-serif"><font size="2"><b style=""><span style="font-family: 'Times New Roman';">create view </span></b><span style="font-family: 'Times New Roman';"><span style="">&nbsp;</span>type_tc<span style="">&nbsp; </span><b style="">(</b>DTID<b style="">,</b>DNAME,
                                    ATID,ANAME<b style="">, </b>...) <b style="">as<o:p></o:p></b></span></font></font></p>
<font color="black" size="2" face="Arial,Helvetica,sans-serif">                                    </font><p class="MsoNormal" style="border: medium none ; margin: 0pt; padding: 0pt;"><font color="black" size="2" face="Arial,Helvetica,sans-serif"><font size="2"><b style=""><span style="font-family: 'Times New Roman';">select </span></b><span style="font-family: 'Times New Roman';"><span style="">&nbsp;</span><span style="">&nbsp;&nbsp; </span>D.TID,D.NAME, A.TID, A.NAME<span style="">&nbsp;&nbsp; </span>.
                                    . .<o:p></o:p></span></font></font></p>
<font color="black" size="2" face="Arial,Helvetica,sans-serif">                                    </font><p class="MsoNormal" style="border: medium none ; margin: 0pt; padding: 0pt;"><font color="black" size="2" face="Arial,Helvetica,sans-serif"><font size="2"><b style=""><span style="font-family: 'Times New Roman';">from </span></b><span style="font-family: 'Times New Roman';"><span style="">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
                                    </span>TYPE<span style="">&nbsp; </span>A, TYPE<span style="">&nbsp;&nbsp; </span>D<o:p></o:p></span></font></font></p>
<font color="black" size="2" face="Arial,Helvetica,sans-serif">                                    </font><p class="MsoNormal" style="border: medium none ; margin: 0pt; padding: 0pt;"><font color="black" size="2" face="Arial,Helvetica,sans-serif"><font size="2"><b style=""><span style="font-family: 'Times New Roman';">where</span></b><span style="font-family: 'Times New Roman';"> <span style="">&nbsp;&nbsp;&nbsp;
                                    </span>D.L<span style="">&nbsp; </span><b style="">between</b><span style="">&nbsp;&nbsp; </span>A.L<span style="">&nbsp; </span><b style="">and </b>A.R<b style=""><o:p></o:p></b></span></font></font></p>
<font color="black" size="2" face="Arial,Helvetica,sans-serif">                                    </font><p class="MsoNormal" style="border: medium none ; margin: 0pt; padding: 0pt;"><font color="black" size="2" face="Arial,Helvetica,sans-serif"><b style=""><span style=""><font size="2">&nbsp;<o:p></o:p></font></span></b></font></p>
<font color="black" size="2" face="Arial,Helvetica,sans-serif">                                    </font><p class="MsoNormal" style="border: medium none ; margin: 0pt; padding: 0pt;"><font color="black" size="2" face="Arial,Helvetica,sans-serif"><font size="2"><b style=""><u><span style="font-family: 'Times New Roman';">Query using Views</span></u></b><b style=""><span style="">:<o:p></o:p></span></b></font></font></p>
<font color="black" size="2" face="Arial,Helvetica,sans-serif">                                    </font><p class="MsoNormal" style="border: medium none ; margin: 0pt; padding: 0pt;"><font color="black" size="2" face="Arial,Helvetica,sans-serif"><font size="2"><b style=""><span style="font-family: 'Times New Roman';">select </span></b><span style="font-family: 'Times New Roman';"><span style="">&nbsp;</span><span style="">&nbsp;&nbsp; </span>O.ANAME, T.ANAME,P.MONTH,<b style="">sum</b>(AMT)<o:p></o:p></span></font></font></p>
<font color="black" size="2" face="Arial,Helvetica,sans-serif">                                    </font><p class="MsoNormal" style="border: medium none ; margin: 0pt; padding: 0pt;"><font color="black" size="2" face="Arial,Helvetica,sans-serif"><font size="2"><b style=""><span style="font-family: 'Times New Roman';">from </span></b><span style="font-family: 'Times New Roman';"><span style="">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
                                    </span>ORG_TC<span style="">&nbsp; </span>O, TYPE_TC T, PERIOD P, COST C<o:p></o:p></span></font></font></p>
<font color="black" size="2" face="Arial,Helvetica,sans-serif">                                    </font><p class="MsoNormal" style="border: medium none ; margin: 0pt; padding: 0pt;"><font color="black" size="2" face="Arial,Helvetica,sans-serif"><font size="2"><b style=""><span style="font-family: 'Times New Roman';">where</span></b><span style="font-family: 'Times New Roman';"> <span style="">&nbsp;&nbsp;&nbsp;
                                    </span>P.WK_END_DT <b style="">between</b><span style="">&nbsp; </span>1/1/1998
                                    <b style="">and</b> 8/1/1998<o:p></o:p></span></font></font></p>
<font color="black" size="2" face="Arial,Helvetica,sans-serif">                                    </font><p class="MsoNormal" style="border: medium none ; margin: 0pt; padding: 0pt;"><span style="font-family: 'Times New Roman';"><font color="black" size="2" face="Arial,Helvetica,sans-serif"><font size="2"><span style="">&nbsp;</span><b style="">and<span style="">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
                                    </span></b>O.ALEVEL = &#8216;DEPT&#8217; <o:p></o:p></font></font></span></p>
<font color="black" size="2" face="Arial,Helvetica,sans-serif">                                    </font><p class="MsoNormal" style="border: medium none ; margin: 0pt; padding: 0pt;"><font color="black" size="2" face="Arial,Helvetica,sans-serif"><font size="2"><b style=""><span style="font-family: 'Times New Roman';"><span style="">&nbsp;</span>and<span style="">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
                                    </span></span></b><span style="font-family: 'Times New Roman';">T.DCLASS = &#8216;LABOR&#8217; <o:p></o:p></span></font></font></p>
<font color="black" size="2" face="Arial,Helvetica,sans-serif">                                    </font><p class="MsoNormal" style="border: medium none ; margin: 0pt; padding: 0pt;"><span style="font-family: 'Times New Roman';"><font color="black" size="2" face="Arial,Helvetica,sans-serif"><font size="2"><span style="">&nbsp;</span><b style="">and</b> <span style="">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
                                    </span>T.ALEVEL = &#8216;S&#8217;<o:p></o:p></font></font></span></p>
<font color="black" size="2" face="Arial,Helvetica,sans-serif">                                    </font><p class="MsoNormal" style="border: medium none ; margin: 0pt; padding: 0pt;"><span style="font-family: 'Times New Roman';"><font color="black" size="2" face="Arial,Helvetica,sans-serif"><font size="2"><span style="">&nbsp;</span><b style="">and<span style="">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
                                    </span></b>P.WK_END_DT = C.PERIOD<o:p></o:p></font></font></span></p>
<font color="black" size="2" face="Arial,Helvetica,sans-serif">                                    </font><p class="MsoNormal" style="border: medium none ; margin: 0pt; padding: 0pt;"><font color="black" size="2" face="Arial,Helvetica,sans-serif"><font size="2"><b style=""><span style="font-family: 'Times New Roman';"><span style="">&nbsp;</span>and<span style="">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
                                    </span></span></b><span style="font-family: 'Times New Roman';">T.TID = C.TYPE<o:p></o:p></span></font></font></p>
<font color="black" size="2" face="Arial,Helvetica,sans-serif">                                    </font><p class="MsoNormal" style="border: medium none ; margin: 0pt; padding: 0pt;"><font color="black" size="2" face="Arial,Helvetica,sans-serif"><font size="2"><b style=""><span style="font-family: 'Times New Roman';"><span style="">&nbsp;</span>and<span style="">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
                                    </span></span></b><span style="font-family: 'Times New Roman';">O.TID = C.ORG<o:p></o:p></span></font></font></p>
<font color="black" size="2" face="Arial,Helvetica,sans-serif">                                    </font><p class="MsoNormal" style="border: medium none ; margin: 0pt; padding: 0pt;"><font color="black" size="2" face="Arial,Helvetica,sans-serif"><font size="2"><b style=""><span style="font-family: 'Times New Roman';">group by</span></b><span style="font-family: 'Times New Roman';"><span style="">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
                                    </span>O.ANAME, T.ANAME, P.MONTH<o:p></o:p></span></font></font></p>
<font color="black" size="2" face="Arial,Helvetica,sans-serif">                                    </font><p class="MsoNormal" style="border: medium none ; margin: 0pt; padding: 0pt;"><font color="black" size="2" face="Arial,Helvetica,sans-serif"><font size="2"><b style=""><span style="font-family: 'Times New Roman';">order by</span></b><span style="font-family: 'Times New Roman';"><span style=""> </span>3,1,2<o:p></o:p></span></font></font></p>
<font color="black" size="2" face="Arial,Helvetica,sans-serif">                                    </font><p class="MsoNormal" style="border: medium none ; margin: 0pt; padding: 0pt;"><span style="font-family: 'Times New Roman';"><font color="black" size="2" face="Arial,Helvetica,sans-serif"><font size="2">&nbsp;<o:p></o:p></font></font></span></p>
<font color="black" size="2" face="Arial,Helvetica,sans-serif">                                    </font><p class="MsoNormal" style="border: medium none ; margin: 0pt; padding: 0pt;"><font color="black" size="2" face="Arial,Helvetica,sans-serif"><b style=""><u><span style=""><font size="2">Query using nested SQL:<o:p></o:p></font></span></u></b></font></p>
<font color="black" size="2" face="Arial,Helvetica,sans-serif">                                    </font><p class="MsoNormal" style="border: medium none ; margin: 0pt; padding: 0pt;"><font color="black" size="2" face="Arial,Helvetica,sans-serif"><b style=""><span style=""><font size="2">With <o:p></o:p></font></span></b></font></p>
<font color="black" size="2" face="Arial,Helvetica,sans-serif">                                    </font><p class="MsoNormal" style="border: medium none ; margin: 0pt; padding: 0pt;"><span style="font-family: 'Times New Roman';"><font color="black" size="2" face="Arial,Helvetica,sans-serif"><font size="2">ORG_TC <b style=""><span style="">&nbsp;</span>as (select </b><span style="">&nbsp;</span><b style="">distinct</b><span style="">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
                                    </span>D.TID, A.NAME<o:p></o:p></font></font></span></p>
<font color="black" size="2" face="Arial,Helvetica,sans-serif">                                    </font><p class="MsoNormal" style="border: medium none ; margin: 0pt; padding: 0pt; text-indent: 36pt;"><font color="black" size="2" face="Arial,Helvetica,sans-serif"><font size="2"><b style=""><span style="font-family: 'Times New Roman';">from </span></b><span style="font-family: 'Times New Roman';"><span style="">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span>ORG<span style="">&nbsp;&nbsp; </span>A, ORG<span style="">&nbsp;&nbsp; </span>D<o:p></o:p></span></font></font></p>
<font color="black" size="2" face="Arial,Helvetica,sans-serif">                                    </font><p class="MsoNormal" style="border: medium none ; margin: 0pt; padding: 0pt; text-indent: 36pt;"><font color="black" size="2" face="Arial,Helvetica,sans-serif"><font size="2"><b style=""><span style="font-family: 'Times New Roman';">where</span></b><span style="font-family: 'Times New Roman';"> <span style="">&nbsp;&nbsp;&nbsp; </span>D.L<span style="">&nbsp; </span><b style="">between</b><span style="">&nbsp;&nbsp; </span>A.L<span style="">&nbsp; </span><b style="">and </b>A.R<o:p></o:p></span></font></font></p>
<font color="black" size="2" face="Arial,Helvetica,sans-serif">                                    </font><p class="MsoNormal" style="border: medium none ; margin: 0pt; padding: 0pt; text-indent: 36pt;"><font color="black" size="2" face="Arial,Helvetica,sans-serif"><font size="2"><b style=""><span style="font-family: 'Times New Roman';">and</span></b><span style="font-family: 'Times New Roman';"><span style="">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span>A.LEVEL = &#8216;DEPT&#8217; <b style="">)</b>,<o:p></o:p></span></font></font></p>
<font color="black" size="2" face="Arial,Helvetica,sans-serif">                                    </font><p class="MsoNormal" style="border: medium none ; margin: 0pt; padding: 0pt;"><span style="font-family: 'Times New Roman';"><font color="black" size="2" face="Arial,Helvetica,sans-serif"><font size="2">TYPE_TC <b style="">as (select distinct</b><span style="">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
                                    </span>D.TID,A.NAME<o:p></o:p></font></font></span></p>
<font color="black" size="2" face="Arial,Helvetica,sans-serif">                                    </font><p class="MsoNormal" style="border: medium none ; margin: 0pt; padding: 0pt; text-indent: 36pt;"><font color="black" size="2" face="Arial,Helvetica,sans-serif"><font size="2"><b style=""><span style="font-family: 'Times New Roman';">from </span></b><span style="font-family: 'Times New Roman';"><span style="">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span>TYPE<span style="">&nbsp; </span>A, TYPE<span style="">&nbsp;&nbsp; </span>D<o:p></o:p></span></font></font></p>
<font color="black" size="2" face="Arial,Helvetica,sans-serif">                                    </font><p class="MsoNormal" style="border: medium none ; margin: 0pt; padding: 0pt; text-indent: 36pt;"><font color="black" size="2" face="Arial,Helvetica,sans-serif"><font size="2"><b style=""><span style="font-family: 'Times New Roman';">where</span></b><span style="font-family: 'Times New Roman';"> <span style="">&nbsp;&nbsp;&nbsp; </span>D.L<span style="">&nbsp; </span><b style="">between</b><span style="">&nbsp;&nbsp; </span>A.L<span style="">&nbsp; </span><b style="">and </b>A.R<b style=""><o:p></o:p></b></span></font></font></p>
<font color="black" size="2" face="Arial,Helvetica,sans-serif">                                    </font><p class="MsoNormal" style="border: medium none ; margin: 0pt; padding: 0pt;"><font color="black" size="2" face="Arial,Helvetica,sans-serif"><font size="2"><b style=""><span style="font-family: 'Times New Roman';"><span style="">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
                                    </span><span style="">&nbsp;&nbsp;&nbsp; </span>and<span style="">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
                                    </span></span></b><span style="font-family: 'Times New Roman';">D.CLASS = &#8216;LABOR&#8217; <o:p></o:p></span></font></font></p>
<font color="black" size="2" face="Arial,Helvetica,sans-serif">                                    </font><p class="MsoNormal" style="border: medium none ; margin: 0pt; padding: 0pt; text-indent: 36pt;"><span style="font-family: 'Times New Roman';"><font color="black" size="2" face="Arial,Helvetica,sans-serif"><font size="2"><span style="">&nbsp;&nbsp; </span><span style="">&nbsp;</span><b style="">and</b> <span style="">&nbsp;&nbsp;&nbsp;&nbsp; </span>A.LEVEL = &#8216;S&#8217;<b style="">)</b><o:p></o:p></font></font></span></p>
<font color="black" size="2" face="Arial,Helvetica,sans-serif">                                    </font><p class="MsoNormal" style="border: medium none ; margin: 0pt; padding: 0pt;"><font color="black" size="2" face="Arial,Helvetica,sans-serif"><font size="2"><b style=""><span style="font-family: 'Times New Roman';">select </span></b><span style="font-family: 'Times New Roman';"><span style="">&nbsp;</span><span style="">&nbsp;&nbsp; </span>O.NAME, T.NAME,P.MONTH,<b style="">sum</b>(AMT)<o:p></o:p></span></font></font></p>
<font color="black" size="2" face="Arial,Helvetica,sans-serif">                                    </font><p class="MsoNormal" style="border: medium none ; margin: 0pt; padding: 0pt;"><font color="black" size="2" face="Arial,Helvetica,sans-serif"><font size="2"><b style=""><span style="font-family: 'Times New Roman';">from </span></b><span style="font-family: 'Times New Roman';"><span style="">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
                                    </span>ORG_TC<span style="">&nbsp; </span>O, TYPE_TC T, PERIOD P, COST C<o:p></o:p></span></font></font></p>
<font color="black" size="2" face="Arial,Helvetica,sans-serif">                                    </font><p class="MsoNormal" style="border: medium none ; margin: 0pt; padding: 0pt;"><font color="black" size="2" face="Arial,Helvetica,sans-serif"><font size="2"><b style=""><span style="font-family: 'Times New Roman';">where</span></b><span style="font-family: 'Times New Roman';"> <span style="">&nbsp;&nbsp;&nbsp;
                                    </span>P.WK_END_DT <b style="">between</b><span style="">&nbsp; </span>1/1/1998
                                    <b style="">and</b> 8/1/1998<o:p></o:p></span></font></font></p>
<font color="black" size="2" face="Arial,Helvetica,sans-serif">                                    </font><p class="MsoNormal" style="border: medium none ; margin: 0pt; padding: 0pt;"><font color="black" size="2" face="Arial,Helvetica,sans-serif"><font size="2"><b style=""><span style="font-family: 'Times New Roman';"><span style="">&nbsp;&nbsp; </span>and<span style="">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
                                    </span></span></b><span style="font-family: 'Times New Roman';">P.WK_END_DT = C.PERIOD<o:p></o:p></span></font></font></p>
<font color="black" size="2" face="Arial,Helvetica,sans-serif">                                    </font><p class="MsoNormal" style="border: medium none ; margin: 0pt; padding: 0pt;"><font color="black" size="2" face="Arial,Helvetica,sans-serif"><font size="2"><b style=""><span style="font-family: 'Times New Roman';"><span style="">&nbsp;&nbsp; </span>and<span style="">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
                                    </span></span></b><span style="font-family: 'Times New Roman';">T.TID = C.TYPE<o:p></o:p></span></font></font></p>
<font color="black" size="2" face="Arial,Helvetica,sans-serif">                                    </font><p class="MsoNormal" style="border: medium none ; margin: 0pt; padding: 0pt;"><font color="black" size="2" face="Arial,Helvetica,sans-serif"><font size="2"><b style=""><span style="font-family: 'Times New Roman';"><span style="">&nbsp;&nbsp; </span>and<span style="">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
                                    </span></span></b><span style="font-family: 'Times New Roman';">O.TID = C.ORG<o:p></o:p></span></font></font></p>
<font color="black" size="2" face="Arial,Helvetica,sans-serif">                                    </font><p class="MsoNormal" style="border: medium none ; margin: 0pt; padding: 0pt;"><font color="black" size="2" face="Arial,Helvetica,sans-serif"><font size="2"><b style=""><span style="font-family: 'Times New Roman';">group by</span></b><span style="font-family: 'Times New Roman';"><span style="">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
                                    </span>O. NAME, T. NAME, P.MONTH<o:p></o:p></span></font></font></p></div>
<font color="black" size="2" face="Arial,Helvetica,sans-serif">                                    </font><div style="border: 0.75pt solid windowtext; padding: 0pt 10pt 1pt 6pt;">
<font color="black" size="2" face="Arial,Helvetica,sans-serif">                                    </font><p class="MsoNormal" style="border: medium none ; margin: 0pt; padding: 0pt;"><font color="black" size="2" face="Arial,Helvetica,sans-serif"><font size="2"><b style=""><span style="font-family: 'Times New Roman';">order by</span></b><span style="font-family: 'Times New Roman';"><span style=""> </span>3,1,2<o:p></o:p></span></font></font></p></div>
<font color="black" size="2" face="Arial,Helvetica,sans-serif">                                    </font><div style="border-style: none none solid; border-color: -moz-use-text-color -moz-use-text-color windowtext; border-width: medium medium 0.75pt; padding: 0pt 0pt 1pt;">
<font color="black" size="2" face="Arial,Helvetica,sans-serif">                                    </font><p class="MsoNormal" style="border: medium none ; margin: 0pt; padding: 0pt;"><span style="font-family: 'Times New Roman';"><font color="black" size="2" face="Arial,Helvetica,sans-serif"><font size="2">&nbsp;<o:p></o:p></font></font></span></p></div>
<font color="black" size="2" face="Arial,Helvetica,sans-serif">                                    </font><p class="Body" style="margin: 12pt 0pt 0pt;"><font color="black" size="2" face="Arial,Helvetica,sans-serif"><font size="2">Let&#8217;s
assume that we are seeking all labor charges grouped by month, at the
summary cost type level (TYPE.LEVEL = &#8216;S&#8217;) and department level of the
organization. Two forms of the query are shown. The first one uses the
transitive closure views, while the second exploits nested SQL and the
&#8220;WITH&#8221; clause of the SQL3 proposal. The first implementation would be
appropriate for any DBMS with an optimizer that will avoid unnecessary
view materialization, such as Oracle. The second form is currently
supported by the DB2 family, and with slight modification, it can be
implemented using temporary intermediate tables in Sybase. </font></font></p>
<font color="black" size="2" face="Arial,Helvetica,sans-serif">                                    </font><p class="Body" style="margin: 12pt 0pt 0pt;"><font color="black" size="2" face="Arial,Helvetica,sans-serif"><font size="2">Of
course, a straightforward implementation without views or nested SQL is
also possible, however it will expose two uses of ORG and of TYPE
tables to the user or tool that has to write the query.<span style="">&nbsp; </span>The
nested SQL suffers from the same problem, but because of the modularity
allowed by the in-line views (WITH clause); it is easier to compose by
advanced users, or by tools using template-driven engines.</font></font></p>
<font color="black" size="2" face="Arial,Helvetica,sans-serif">                                    </font><p class="Body" style="margin: 12pt 0pt 0pt;"><font color="black" size="2" face="Arial,Helvetica,sans-serif"><font size="2">A
complication that may arise is that dimension selections contain no
duplicates during the join to the fact table. One can often guarantee
this from the selection criteria alone. In cases, however, where lists
of ancestors are provided, it may be that some are descendents of
others, and we may end up selecting the same descendent multiple times.
The nested SQL example of figure 3 uses the DISTINCT keyword in
dimension subselects to gurantee the elimination of duplicates. Regular
queries can also achieve the same result by pushing the selection in
EXISTS or IN clauses. </font></font></p>
<font color="black" size="2" face="Arial,Helvetica,sans-serif">                                    </font><h2 style="margin: 12pt 0pt 0pt;"><span style="font-family: 'Times New Roman';"><font color="black" size="2" face="Arial,Helvetica,sans-serif"><em><font size="3">Generating L and R numbers<o:p></o:p></font></em></font></span></h2>
<font color="black" size="2" face="Arial,Helvetica,sans-serif">                                    </font><p class="Body" style="margin: 12pt 0pt 0pt;"><font color="black" size="2" face="Arial,Helvetica,sans-serif"><font size="2">We saw how the <b style="">L/R</b> numbers
                                    can be used for efficient ancestor-descendant queries.<span style="">&nbsp; </span>However, how should these
                                    values be maintained?<span style="">&nbsp; </span>It can be done incrementally, as the table is updated,
                                    or in batch.<span style="">&nbsp; </span>Figure 4 describes a simple algorithm that assigns these<span style="">&nbsp; </span>numbers.<span style="">&nbsp;&nbsp; </span>It uses the parent-child relationship to walk
                                    the hierarchy from the root(s) depth-first, left-to-right, and assigns values to <b style="">L</b>
                                    and<span style="">&nbsp; </span><b style="">R</b><span style="">&nbsp;
                                    </span>using a simple counter.<span style="">&nbsp; </span>In order to allow for efficient maintenance operations,<span style="">&nbsp; </span>a constant SKIP-VALUE is added prior to assigning the <b style="">R</b> value.<span style="">&nbsp; </span>This has an effect similar to that of PERCENT_FREE in an
                                    index.<span style="">&nbsp; </span>On-line maintenance activities use the range of unused <b style="">L</b> values to attach or reallocate children.<span style="">&nbsp; </span>After a while these ranges
                                    are filled, and a batch reassignment has an effect similar to that of index reorganization.<span style="">&nbsp;
                                    </span>By allowing<span style="">&nbsp; </span>neither <b style="">L</b> nor
                                    <b style="">R </b>to be used for externally<span style="">&nbsp; </span>referencing
                                    objects, this reassignment remains independent to object identification and referencing.<span style="">&nbsp;
                                    </span>To carry the indexing<span style="">&nbsp; </span>similarity a step further,<span style="">&nbsp; </span>think how by not using addresses to reference objects<span style="">&nbsp; </span>in an
                                    R-DBMS index, maintenance remains orthogonal to object identification. </font></font></p>
<font color="black" size="2" face="Arial,Helvetica,sans-serif">                                    </font><p class="Body" style="margin: 12pt 0pt 0pt;"><font color="black" size="2" face="Arial,Helvetica,sans-serif"><font size="2"><span style="">&nbsp;</span>The algorithm starts
                                    by reading all nodes that have no parent, and storing them in an array.<span style="">&nbsp; </span>The last
                                    array element<span style="">&nbsp; </span>is<span style="">&nbsp; </span>assigned the <b style="">L</b> value<span style="">&nbsp; </span>from an incremented counter,
                                    and then all its children are appended to the array.<span style="">&nbsp; </span>The last element is again
                                    selected and processed similarly,<span style="">&nbsp; </span>and this is repeated until some element is
                                    found that has no children.<span style="">&nbsp; </span>The array now contains concatenated consecutive children
                                    sets along one<span style="">&nbsp; </span>path of nodes defined by the lexicographically highest keys of
                                    each level.</font></font></p>
<font color="black" size="2" face="Arial,Helvetica,sans-serif">                                    </font><p class="FigureCaption" style="margin: 12pt 0pt 0pt;"><span style="font-family: 'Times New Roman';"><font color="black" size="2" face="Arial,Helvetica,sans-serif"><strong><font size="2">Figure
                                    4---- L &amp; R Generation Algorithm<o:p></o:p></font></strong></font></span></p>
<font color="black" size="2" face="Arial,Helvetica,sans-serif">                                    </font><div style="border-style: none none solid; border-color: -moz-use-text-color -moz-use-text-color windowtext; border-width: medium medium 0.75pt; padding: 0pt 0pt 1pt;">
<font color="black" size="2" face="Arial,Helvetica,sans-serif">                                    </font><p class="MsoNormal" style="border: medium none ; margin: 0pt 0pt 12pt; padding: 0pt;"><span style="font-family: 'Times New Roman';"><font color="black" size="2" face="Arial,Helvetica,sans-serif"><font size="2">&nbsp;<o:p></o:p></font></font></span></p></div>
<font color="black" size="2" face="Arial,Helvetica,sans-serif">                                    </font><div style="border: 0.75pt solid windowtext; padding: 1pt;">
<font color="black" size="2" face="Arial,Helvetica,sans-serif">                                    </font><p class="alg" style="margin: 0pt;"><span style="font-size: 10pt; font-family: 'Times New Roman';"><font color="black" size="2" face="Arial,Helvetica,sans-serif">accept<span style="">&nbsp; </span>constant SKIP; <o:p></o:p></font></span></p>
<font color="black" size="2" face="Arial,Helvetica,sans-serif">                                    </font><p class="alg" style="margin: 0pt;"><span style="font-size: 10pt; font-family: 'Times New Roman';"><font color="black" size="2" face="Arial,Helvetica,sans-serif">let<span style="">&nbsp; </span>A:<span style="">&nbsp; </span>array of {<span style="">&nbsp; </span>TID:<span style="">&nbsp; </span>primary key of org,<o:p></o:p></font></span></p>
<font color="black" size="2" face="Arial,Helvetica,sans-serif">                                    </font><p class="alg" style="margin: 0pt;"><span style="font-size: 10pt; font-family: 'Times New Roman';"><span style=""><font color="black" size="2" face="Arial,Helvetica,sans-serif">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;

</font></span><font color="black" size="2" face="Arial,Helvetica,sans-serif">L:<span style="">&nbsp;&nbsp;&nbsp;&nbsp; </span><span style="">&nbsp; </span>integer
                                    = 0,<o:p></o:p></font></span></p>
<font color="black" size="2" face="Arial,Helvetica,sans-serif">                                    </font><p class="alg" style="margin: 0pt;"><span style="font-size: 10pt; font-family: 'Times New Roman';"><span style=""><font color="black" size="2" face="Arial,Helvetica,sans-serif">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;

</font></span><font color="black" size="2" face="Arial,Helvetica,sans-serif">R: integer = 0}<o:p></o:p></font></span></p>
<font color="black" size="2" face="Arial,Helvetica,sans-serif">                                    </font><p class="alg" style="margin: 0pt;"><span style="font-size: 10pt; font-family: 'Times New Roman';"><span style=""><font color="black" size="2" face="Arial,Helvetica,sans-serif">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </font></span><font color="black" size="2" face="Arial,Helvetica,sans-serif">indexed by<span style="">&nbsp; </span>i = 0;<o:p></o:p></font></span></p>
<font color="black" size="2" face="Arial,Helvetica,sans-serif">                                    </font><p class="alg" style="margin: 0pt;"><span style="font-size: 10pt; font-family: 'Times New Roman';"><font color="black" size="2" face="Arial,Helvetica,sans-serif">initialize <span style=""></span><span style="">&nbsp;</span>integer: Counter = 0 ;<o:p></o:p></font></span></p>
<font color="black" size="2" face="Arial,Helvetica,sans-serif">                                    </font><p class="alg" style="margin: 0pt;"><span style="font-size: 10pt; font-family: 'Times New Roman';"><font color="black" size="2" face="Arial,Helvetica,sans-serif">&nbsp;<o:p></o:p></font></span></p>
<font color="black" size="2" face="Arial,Helvetica,sans-serif">                                    </font><p class="alg" style="margin: 0pt;"><span style="font-size: 10pt; font-family: 'Times New Roman';"><span style=""><font color="black" size="2" face="Arial,Helvetica,sans-serif">&nbsp;</font></span><font color="black" size="2" face="Arial,Helvetica,sans-serif">load root nodes using<o:p></o:p></font></span></p>
<font color="black" size="2" face="Arial,Helvetica,sans-serif">                                    </font><p class="alg" style="margin: 0pt;"><span style="font-size: 10pt; font-family: 'Times New Roman';"><span style=""><font color="black" size="2" face="Arial,Helvetica,sans-serif">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </font></span><font color="black" size="2" face="Arial,Helvetica,sans-serif">select <span style="">&nbsp;&nbsp;&nbsp;&nbsp; </span>TID,
                                    0, 0<o:p></o:p></font></span></p>
<font color="black" size="2" face="Arial,Helvetica,sans-serif">                                    </font><p class="alg" style="margin: 0pt;"><span style="font-size: 10pt; font-family: 'Times New Roman';"><span style=""><font color="black" size="2" face="Arial,Helvetica,sans-serif">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </font></span><font color="black" size="2" face="Arial,Helvetica,sans-serif">from<span style="">&nbsp; </span><span style="">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span>ORG<o:p></o:p></font></span></p>
<font color="black" size="2" face="Arial,Helvetica,sans-serif">                                    </font><p class="alg" style="margin: 0pt;"><span style="font-size: 10pt; font-family: 'Times New Roman';"><span style=""><font color="black" size="2" face="Arial,Helvetica,sans-serif">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </font></span><font color="black" size="2" face="Arial,Helvetica,sans-serif">where <span style="">&nbsp;&nbsp;&nbsp; </span>PID is
                                    NULL ;<o:p></o:p></font></span></p>
<font color="black" size="2" face="Arial,Helvetica,sans-serif">                                    </font><p class="alg" style="margin: 0pt;"><span style="font-size: 10pt; font-family: 'Times New Roman';"><span style=""><font color="black" size="2" face="Arial,Helvetica,sans-serif">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </font></span><font color="black" size="2" face="Arial,Helvetica,sans-serif">load<span style="">&nbsp; </span>each<span style="">&nbsp; </span>into<span style="">&nbsp; </span>A after incrementing i by 1<o:p></o:p></font></span></p>
<font color="black" size="2" face="Arial,Helvetica,sans-serif">                                    </font><p class="alg" style="margin: 0pt;"><span style="font-size: 10pt; font-family: 'Times New Roman';"><font color="black" size="2" face="Arial,Helvetica,sans-serif">&nbsp;<o:p></o:p></font></span></p>
<font color="black" size="2" face="Arial,Helvetica,sans-serif">                                    </font><p class="alg" style="margin: 0pt;"><font color="black" size="2" face="Arial,Helvetica,sans-serif"><i style=""><span style="font-size: 10pt; font-family: 'Times New Roman';">-- <span style="">&nbsp; </span>i is left pointing to the last element
                                    loaded<o:p></o:p></span></i></font></p>
<font color="black" size="2" face="Arial,Helvetica,sans-serif">                                    </font><p class="alg" style="margin: 0pt;"><span style="font-size: 10pt; font-family: 'Times New Roman';"><font color="black" size="2" face="Arial,Helvetica,sans-serif">&nbsp;<o:p></o:p></font></span></p>
<font color="black" size="2" face="Arial,Helvetica,sans-serif">                                    </font><p class="alg" style="margin: 0pt;"><span style="font-size: 10pt; font-family: 'Times New Roman';"><font color="black" size="2" face="Arial,Helvetica,sans-serif">while<span style="">&nbsp; </span>i &gt; 0 do<span style="">&nbsp;&nbsp;&nbsp; </span><i style="">--
                                    process last node of array until empty:</i><o:p></o:p></font></span></p>
<font color="black" size="2" face="Arial,Helvetica,sans-serif">                                    </font><p class="alg" style="margin: 0pt;"><span style="font-size: 10pt; font-family: 'Times New Roman';"><font color="black" size="2" face="Arial,Helvetica,sans-serif">if<span style="">&nbsp; </span>A[i].L<span style="">&nbsp; </span>=<span style="">&nbsp; </span>0 <o:p></o:p></font></span></p>
<font color="black" size="2" face="Arial,Helvetica,sans-serif">                                    </font><p class="alg" style="margin: 0pt;"><span style="font-size: 10pt; font-family: 'Times New Roman';"><span style=""><font color="black" size="2" face="Arial,Helvetica,sans-serif">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </font></span><font color="black" size="2" face="Arial,Helvetica,sans-serif">set A[i].L :=<span style="">&nbsp; </span>++ Counter;<o:p></o:p></font></span></p>
<font color="black" size="2" face="Arial,Helvetica,sans-serif">                                    </font><p class="alg" style="margin: 0pt;"><span style="font-size: 10pt; font-family: 'Times New Roman';"><span style=""><font color="black" size="2" face="Arial,Helvetica,sans-serif">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </font></span><font color="black" size="2" face="Arial,Helvetica,sans-serif">append children of A[i].TID<sub> </sub>to A using<o:p></o:p></font></span></p>
<font color="black" size="2" face="Arial,Helvetica,sans-serif">                                    </font><p class="alg" style="margin: 0pt;"><span style="font-size: 10pt; font-family: 'Times New Roman';"><span style=""><font color="black" size="2" face="Arial,Helvetica,sans-serif">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </font></span><font color="black" size="2" face="Arial,Helvetica,sans-serif">select<span style="">&nbsp;&nbsp;&nbsp; </span>TID, 0. 0<o:p></o:p></font></span></p>
<font color="black" size="2" face="Arial,Helvetica,sans-serif">                                    </font><p class="alg" style="margin: 0pt;"><span style="font-size: 10pt; font-family: 'Times New Roman';"><span style=""><font color="black" size="2" face="Arial,Helvetica,sans-serif">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </font></span><font color="black" size="2" face="Arial,Helvetica,sans-serif">from<span style="">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span><span style="">&nbsp;&nbsp; </span>ORG<o:p></o:p></font></span></p>
<font color="black" size="2" face="Arial,Helvetica,sans-serif">                                    </font><p class="alg" style="margin: 0pt;"><span style="font-size: 10pt; font-family: 'Times New Roman';"><span style=""><font color="black" size="2" face="Arial,Helvetica,sans-serif">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </font></span><font color="black" size="2" face="Arial,Helvetica,sans-serif">where<span style="">&nbsp; </span>PID =<span style="">&nbsp; </span>A[i].TID<o:p></o:p></font></span></p>
<font color="black" size="2" face="Arial,Helvetica,sans-serif">                                    </font><p class="alg" style="margin: 0pt;"><span style="font-size: 10pt; font-family: 'Times New Roman';"><span style=""><font color="black" size="2" face="Arial,Helvetica,sans-serif">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </font></span><font color="black" size="2" face="Arial,Helvetica,sans-serif">load each<span style="">&nbsp; </span>into A after incrementing i by 1<o:p></o:p></font></span></p>
<font color="black" size="2" face="Arial,Helvetica,sans-serif">                                    </font><p class="alg" style="margin: 0pt;"><span style="font-size: 10pt; font-family: 'Times New Roman';"><font color="black" size="2" face="Arial,Helvetica,sans-serif">&nbsp;<o:p></o:p></font></span></p>
<font color="black" size="2" face="Arial,Helvetica,sans-serif">                                    </font><p class="alg" style="margin: 0pt;"><font color="black" size="2" face="Arial,Helvetica,sans-serif"><i style=""><span style="font-size: 10pt;"><span style="">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span>-- i<span style="">&nbsp; </span>is left pointing to last element loaded<span style="">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
                                    </span><o:p></o:p></span></i></font></p>
<font color="black" size="2" face="Arial,Helvetica,sans-serif">                                    </font><p class="alg" style="margin: 0pt;"><span style="font-size: 10pt; font-family: 'Times New Roman';"><font color="black" size="2" face="Arial,Helvetica,sans-serif">else<o:p></o:p></font></span></p>
<font color="black" size="2" face="Arial,Helvetica,sans-serif">                                    </font><p class="alg" style="margin: 0pt;"><span style="font-size: 10pt; font-family: 'Times New Roman';"><span style=""><font color="black" size="2" face="Arial,Helvetica,sans-serif">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </font></span><font color="black" size="2" face="Arial,Helvetica,sans-serif">set A[i].R<sub> </sub>:= (Counter := Counter + SKIP);<o:p></o:p></font></span></p>
<font color="black" size="2" face="Arial,Helvetica,sans-serif">                                    </font><p class="alg" style="margin: 0pt;"><span style="font-size: 10pt; font-family: 'Times New Roman';"><span style=""><font color="black" size="2" face="Arial,Helvetica,sans-serif">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </font></span><font color="black" size="2" face="Arial,Helvetica,sans-serif">update<span style="">&nbsp; </span>ORG[TID<sub>i</sub>]<span style="">&nbsp;&nbsp; </span>using<o:p></o:p></font></span></p>
<font color="black" size="2" face="Arial,Helvetica,sans-serif">                                    </font><p class="alg" style="margin: 0pt;"><span style="font-size: 10pt; font-family: 'Times New Roman';"><span style=""><font color="black" size="2" face="Arial,Helvetica,sans-serif">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </font></span><font color="black" size="2" face="Arial,Helvetica,sans-serif">update<span style="">&nbsp; </span>ORG <o:p></o:p></font></span></p>
<font color="black" size="2" face="Arial,Helvetica,sans-serif">                                    </font><p class="alg" style="margin: 0pt;"><span style="font-size: 10pt; font-family: 'Times New Roman';"><span style=""><font color="black" size="2" face="Arial,Helvetica,sans-serif">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </font></span><font color="black" size="2" face="Arial,Helvetica,sans-serif">set<span style="">&nbsp; </span><span style=""></span>L<span style="">&nbsp;&nbsp; </span>= A[i].L<o:p></o:p></font></span></p>
<font color="black" size="2" face="Arial,Helvetica,sans-serif">                                    </font><p class="alg" style="margin: 0pt;"><span style="font-size: 10pt; font-family: 'Times New Roman';"><span style=""><font color="black" size="2" face="Arial,Helvetica,sans-serif">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;

</font></span><font color="black" size="2" face="Arial,Helvetica,sans-serif">R = A[i].R<o:p></o:p></font></span></p>
<font color="black" size="2" face="Arial,Helvetica,sans-serif">                                    </font><p class="alg" style="margin: 0pt;"><span style="font-size: 10pt; font-family: 'Times New Roman';"><span style=""><font color="black" size="2" face="Arial,Helvetica,sans-serif">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </font></span><font color="black" size="2" face="Arial,Helvetica,sans-serif">where<span style="">&nbsp; </span>TID = A[i].TID<o:p></o:p></font></span></p>
<font color="black" size="2" face="Arial,Helvetica,sans-serif">                                    </font><p class="alg" style="margin: 0pt;"><span style="font-size: 10pt; font-family: 'Times New Roman';"><span style=""><font color="black" size="2" face="Arial,Helvetica,sans-serif">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </font></span><font color="black" size="2" face="Arial,Helvetica,sans-serif">decrement<span style="">&nbsp; </span>i<span style="">&nbsp; </span>by<span style="">&nbsp; </span>1<o:p></o:p></font></span></p>
<font color="black" size="2" face="Arial,Helvetica,sans-serif">                                    </font><p class="alg" style="margin: 0pt;"><span style="font-size: 10pt; font-family: 'Times New Roman';"><font color="black" size="2" face="Arial,Helvetica,sans-serif">endif<o:p></o:p></font></span></p>
<font color="black" size="2" face="Arial,Helvetica,sans-serif">                                    </font><p class="alg" style="margin: 0pt;"><span style="font-size: 10pt; font-family: 'Times New Roman';"><font color="black" size="2" face="Arial,Helvetica,sans-serif">repeat;<o:p></o:p></font></span></p></div>
<font color="black" size="2" face="Arial,Helvetica,sans-serif">                                    </font><div style="border-style: none none solid; border-color: -moz-use-text-color -moz-use-text-color windowtext; border-width: medium medium 0.75pt; padding: 0pt 0pt 1pt;">
<font color="black" size="2" face="Arial,Helvetica,sans-serif">                                    </font><p class="MsoNormal" style="border: medium none ; margin: 0pt; padding: 0pt;"><span style="font-family: 'Times New Roman';"><font color="black" size="2" face="Arial,Helvetica,sans-serif"><font size="2">&nbsp;<o:p></o:p></font></font></span></p></div>
<font color="black" size="2" face="Arial,Helvetica,sans-serif">                                    </font><p class="Body" style="margin: 12pt 0pt 0pt;"><font color="black" size="2" face="Arial,Helvetica,sans-serif"><font size="2">Then the R number of the last childless element is assigned, after
                                    incrementing the counter by the constant SKIP value, and finally its <b style="">L</b> and <b style="">R</b>-values are updated in the database.<span style="">&nbsp; </span>Processing
                                    then continues with the next item on the left in the array.<span style="">&nbsp; </span>If that item has
                                    not been assigned an <b style="">L</b>
value, it is a member of the same child-set, and follows the same
processing, that is, its children are appended to the right and
processing continues with the last element. If on the other hand the
item already has an <b style="">L</b> value assigned, it means that all its
                                    children have been processed and stored. The next counter value is assigned to its <b style="">R,
                                    and t</b>he node is written to the database before proceeding with the next node on the left.<span style="">&nbsp;
                                    </span></font></font></p>
<font color="black" size="2" face="Arial,Helvetica,sans-serif">                                    </font><p class="Body" style="margin: 12pt 0pt 0pt;"><font color="black" size="2" face="Arial,Helvetica,sans-serif"><font size="2">Each time the <i style="">while</i> loop
                                    is entered, the following applies:</font></font></p>
<font color="black" size="2" face="Arial,Helvetica,sans-serif">                                    </font><p class="Enumerate" style="margin: 12pt 0pt 0pt 18pt;"><span style="font-family: 'Times New Roman';"><font color="black" size="2" face="Arial,Helvetica,sans-serif"><font size="2">1.<span style="">&nbsp;&nbsp;&nbsp;&nbsp; </span>All ancestors of any node<span style="">&nbsp; </span>on the array are<span style="">&nbsp; </span>somewhere between the beginning of the array and that node. <o:p></o:p></font></font></span></p>
<font color="black" size="2" face="Arial,Helvetica,sans-serif">                                    </font><p class="Enumerate" style="margin: 12pt 0pt 0pt 18pt;"><span style="font-family: 'Times New Roman';"><font color="black" size="2" face="Arial,Helvetica,sans-serif"><font size="2">2.<span style="">&nbsp;&nbsp;&nbsp;&nbsp; </span>If a node on the array has been assigned an L number, all its ancestors have been assigned
                                    smaller L values.<span style="">&nbsp; </span><o:p></o:p></font></font></span></p>
<font color="black" size="2" face="Arial,Helvetica,sans-serif">                                    </font><p class="Enumerate" style="margin: 12pt 0pt 0pt 18pt;"><span style="font-family: 'Times New Roman';"><font color="black" size="2" face="Arial,Helvetica,sans-serif"><font size="2">3.<span style="">&nbsp;&nbsp;&nbsp;&nbsp; </span>If A[i] has an L number assigned, it has no children, or its children have been updated
                                    with L values higher than A[i].L<span style="">&nbsp; </span>and lower than or equal to the Counter value.
                                    Also, all its ancestors have been assigned smaller L values, and<span style="">&nbsp; </span>none of them
                                    has been assigned an R value<o:p></o:p></font></font></span></p>
<font color="black" size="2" face="Arial,Helvetica,sans-serif">                                    </font><p class="Body" style="margin: 12pt 0pt 0pt;"><font color="black" size="2" face="Arial,Helvetica,sans-serif"><font size="2">The process<span style="">&nbsp; </span>eventually
                                    unwinds until no nodes are left on the array unprocessed.<span style="">&nbsp; </span>The
array size needed is equal to the maximum combined size of all children
sets along any one path from any top to any leaf node.<span style="">&nbsp; </span></font></font></p>
<font color="black" size="2" face="Arial,Helvetica,sans-serif">                                    </font><p class="Body" style="margin: 12pt 0pt 0pt;"><font color="black" size="2" face="Arial,Helvetica,sans-serif"><font size="2">The algorithm uses the array as a stack to process the tree in layers.<span style="">&nbsp; </span>Each node is read once and updated once, consequently the cost of the algorithm is
                                    of the order of the number of nodes in the tree. </font></font></p>
<font color="black" size="2" face="Arial,Helvetica,sans-serif">                                    </font><p class="Body" style="margin: 12pt 0pt 0pt;"><font color="black" size="2" face="Arial,Helvetica,sans-serif"><font size="2">A way to improve the performance of this algorithm is to reduce the
                                    cost of attempting to access the children of leaf nodes.<span style="">&nbsp; </span>This can be <span style="">&nbsp;</span>achieved by marking all nodes that are leaves up-front, using<span style="">&nbsp; </span>two<span style="">&nbsp; </span>set<span style="">&nbsp; </span>update operations that assign the
                                    appropriate value to the LL<span style="">&nbsp; </span>(Lowest Level) indicator:</font></font></p>
<font color="black" size="2" face="Arial,Helvetica,sans-serif">                                    </font><p class="Enumerate" style="margin: 12pt 0pt 0pt 18pt;"><span style="font-family: 'Times New Roman';"><font color="black" size="2" face="Arial,Helvetica,sans-serif"><font size="2">Update ORG
                                    set LL = Y;<o:p></o:p></font></font></span></p>
<font color="black" size="2" face="Arial,Helvetica,sans-serif">                                    </font><p class="Enumerate" style="margin: 12pt 0pt 0pt 18pt;"><span style="font-family: 'Times New Roman';"><font color="black" size="2" face="Arial,Helvetica,sans-serif"><font size="2">Update ORG<span style="">&nbsp; </span>set LL = N where ORG.TID not used as a PID<o:p></o:p></font></font></span></p>
<font color="black" size="2" face="Arial,Helvetica,sans-serif">                                    </font><p class="Body" style="margin: 12pt 0pt 0pt;"><font color="black" size="2" face="Arial,Helvetica,sans-serif"><font size="2">The cost of this enhancement is two table scans and can only be justified
                                    if the number<span style="">&nbsp; </span>of
leaf nodes is significantly larger than the non-leaf ones. In a tree
such as the example discussed in the introduction, this would amount to
executing the second set update for only 1,111 nodes, and in exchange
avoid 10,000 attempts to get children of leaf nodes.<span style="">&nbsp; </span></font></font></p>
<font color="black" size="2" face="Arial,Helvetica,sans-serif">                                    </font><p class="Body" style="margin: 12pt 0pt 0pt;"><font color="black" size="2" face="Arial,Helvetica,sans-serif"><font size="2">A
word of caution: This algorithm assumes that the PID references do not
form cyclic paths. If the purity of the tree can be guaranteed from the
process that inserts/updates the table and the PID value, the algorithm
shown will be adequate. Otherwise an &#8220;occurs check&#8221; needs to be added
to insure that every time a new layer of children is read into the
array A, none of these children also appears in their respective
ancestor path. </font></font></p>
<font color="black" size="2" face="Arial,Helvetica,sans-serif">                                    </font><h2 style="margin: 12pt 0pt 0pt;"><font color="black" size="2" face="Arial,Helvetica,sans-serif"><a name="_Ref429733590"><font color="black"><span style="font-family: 'Times New Roman';"><em><font size="3">Conclusion</font></em></span></font></a><span style="font-family: 'Times New Roman';"><o:p></o:p></span></font></h2>
<font color="black" size="2" face="Arial,Helvetica,sans-serif">                                    </font><p class="Body" style="margin: 12pt 0pt 0pt;"><font color="black" size="2" face="Arial,Helvetica,sans-serif"><font size="2">The
technique described in this article is not a general substitute for
fixed level dimensions or hierarchies. Fixed depth dimensions are
simpler to implement, maintain and query. However, there are cases
where forcing a dimension to a fixed uniform number of levels causes
more problems than it solves. Hierarchies that have variable depth or
an uncertain number of levels or hierarchies defined after the
warehouse is deployed, or stratifications that are based on complex
rules can often benefit if implemented as recursive hierarchies. </font></font></p>
<font color="black" size="2" face="Arial,Helvetica,sans-serif">                                    </font><p class="Body" style="margin: 12pt 0pt 0pt;"><font color="black" size="2" face="Arial,Helvetica,sans-serif"><font size="2">Remember
that recursive hierarchies are desirable for their flexibility, they
are less of a performance concern, but they introduce some degree of
complexity. Make sure that your front-end tools will generate the
proper SQL and that you have worked out a way to maintain them.
Validate performance expectations with your specific DBMS and optimizer
using realistic size dimension and fact tables. </font></font></p>
<font color="black" size="2" face="Arial,Helvetica,sans-serif">                                    </font><p class="Body" style="margin: 12pt 0pt 0pt;"><font color="black" size="2" face="Arial,Helvetica,sans-serif"><font size="2">Recursive
hierarchies can also implement slowly changing recursive dimensions
using versioning. The result is a very powerful, general dimension
archetype. The hierarchical behavior and the versioning behavior can be
captured as independent design patterns and can be superimposed. The
versioning approach was presented in the DBP&amp;D article on &#8220;Snapshot
Integrity&#8221; in the September 1998 issue.</font>
                                    <!--"''"--></font></p></div><font color="black" size="2" face="Arial,Helvetica,sans-serif"></font>
                                 <p></p>
                                 <!--/area Type="main"-->
                              </td>
                           </tr>
                           <tr>
                              <td width="592"><img src="0316%20Recursive%20Hierarchies-%20The%20Relational%20Taboo_files/spacer.gif" alt="" width="1" height="12"></td>
                           </tr>
                           <tr>
                              <td valign="top" width="592">
                                 <!--area Type="area_a" face="Arial,Helvetica,sans-serif" size="2" color="black" style="0"-->
                                 <!--/area Type="area_a"-->
                              </td>
                           </tr>
                           <tr>
                              <td width="592"><img src="0316%20Recursive%20Hierarchies-%20The%20Relational%20Taboo_files/spacer.gif" alt="" width="1" height="12"></td>
                           </tr>
                           <tr>
                              <td valign="top" width="592">
                                 <!--area Type="area_b" face="Arial,Helvetica,sans-serif" size="2" color="black" style="0"-->
                                 <!--/area Type="area_b"-->
                              </td>
                           </tr>
                           <tr>
                              <td width="592"><img src="0316%20Recursive%20Hierarchies-%20The%20Relational%20Taboo_files/spacer.gif" alt="" width="1" height="12"></td>
                           </tr>
                           <tr>
                              <td valign="top" width="592">
                                 <!--area Type="area_c" face="Arial,Helvetica,sans-serif" size="2" color="black" style="0"-->
                                 <!--/area Type="area_c"-->
                              </td>
                           </tr>
                        </tbody></table>
                     </td>
                  </tr>
                  <tr>
                     <td bgcolor="#999999">
                        <table border="0" cellpadding="0" cellspacing="0">
                           <tbody><tr>
                              <td valign="top" width="596">
                                 <!--area Type="runner" face="Arial,Helvetica,sans-serif" size="1" color="#ffffff" style="1"-->
                                 
                                 <p><font color="#ffffff" size="1" face="Arial,Helvetica,sans-serif"><b></b></font></p><div><font color="#ffffff" size="1" face="Arial,Helvetica,sans-serif"><b>Bibliography:</b></font></div>
<font color="#ffffff" size="1" face="Arial,Helvetica,sans-serif"><b>                                    </b></font><div><font color="#ffffff" size="1" face="Arial,Helvetica,sans-serif"><b><em><a href="http://www.amazon.com/Hierarchies-Smarties-Kaufmann-Management-Systems/dp/1558609202" target="_blank"><font color="#ffffff">J. Celko&#8217;s&nbsp; &#8220;Trees and Hierarchies in SQL for Smarties&#8221;&nbsp; 2004</font></a>&nbsp;</em>
                                    <!--"''"--></b></font></div><font color="#ffffff" size="1" face="Arial,Helvetica,sans-serif"><b></b></font>
                                 <p></p>
                                 
                                 	
                                 <!--area Type="footer" face="Arial,Helvetica,sans-serif" size="1" color="#ffffff" style="1"-->
                                 <!--/area Type="footer"-->
                                 <!--/area Type="runner"-->
                              </td>
                           </tr>
                        </tbody></table>
                     </td>
                  </tr>
               </tbody></table>
            </td>
            <td width="2"><img src="0316%20Recursive%20Hierarchies-%20The%20Relational%20Taboo_files/spacer.gif" alt="" width="2" height="2"></td>
         </tr>
         <tr>
            <td colspan="4" valign="top" width="759"><img src="0316%20Recursive%20Hierarchies-%20The%20Relational%20Taboo_files/spacer.gif" alt="" width="1" height="2"></td>
         </tr>
      </tbody></table>
   </body></html>